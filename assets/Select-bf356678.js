import{d as w,k as b,c as I,q as Z,s as X,v as ee,x as te,O as T,y as ne,o as S,b as M,e as x,l as F,w as R,m as A,D as se,t as V,T as ae,F as q,r as G,a as ie,n as Q,A as re,B as le}from"./index-fa2db9d6.js";import{F as oe,w as ue,h as ce,o as g,c as de,u as fe,l as L,H as D,t as N,b as ve,p as pe,N as B,a as m,v as he,d as z,_ as J,O as me}from"./use-outside-click-21f3f43a.js";import{p as ge,u as ye,x as _e,a as _}from"./use-text-value-05efac81.js";import{p as be}from"./use-tree-walker-7cc814eb.js";import{o as xe,s as Se,q as K,r as Ie,t as U,C as Me,v as C,w as P,V as Te,x as we,y as H,z as ke,A as $,E as Fe}from"./parcelData-63db60fa.js";var Re=(s=>(s[s.Open=0]="Open",s[s.Closed=1]="Closed",s))(Re||{}),Ae=(s=>(s[s.Pointer=0]="Pointer",s[s.Other=1]="Other",s))(Ae||{});function Ce(s){requestAnimationFrame(()=>requestAnimationFrame(s))}let W=Symbol("MenuContext");function O(s){let t=ne(W,null);if(t===null){let a=new Error(`<${s} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,O),a}return t}let Pe=w({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(s,{slots:t,attrs:a}){let o=b(1),e=b(null),c=b(null),l=b([]),v=b(""),d=b(null),r=b(1);function n(u=p=>p){let p=d.value!==null?l.value[d.value]:null,h=me(u(l.value.slice()),y=>g(y.dataRef.domRef)),i=p?h.indexOf(p):null;return i===-1&&(i=null),{items:h,activeItemIndex:i}}let f={menuState:o,buttonRef:e,itemsRef:c,items:l,searchQuery:v,activeItemIndex:d,activationTrigger:r,closeMenu:()=>{o.value=1,d.value=null},openMenu:()=>o.value=0,goToItem(u,p,h){let i=n(),y=_e(u===_.Specific?{focus:_.Specific,id:p}:{focus:u},{resolveItems:()=>i.items,resolveActiveIndex:()=>i.activeItemIndex,resolveId:k=>k.id,resolveDisabled:k=>k.dataRef.disabled});v.value="",d.value=y,r.value=h??1,l.value=i.items},search(u){let p=v.value!==""?0:1;v.value+=u.toLowerCase();let h=(d.value!==null?l.value.slice(d.value+p).concat(l.value.slice(0,d.value+p)):l.value).find(y=>y.dataRef.textValue.startsWith(v.value)&&!y.dataRef.disabled),i=h?l.value.indexOf(h):-1;i===-1||i===d.value||(d.value=i,r.value=1)},clearSearch(){v.value=""},registerItem(u,p){let h=n(i=>[...i,{id:u,dataRef:p}]);l.value=h.items,d.value=h.activeItemIndex,r.value=1},unregisterItem(u){let p=n(h=>{let i=h.findIndex(y=>y.id===u);return i!==-1&&h.splice(i,1),h});l.value=p.items,d.value=p.activeItemIndex,r.value=1}};return oe([e,c],(u,p)=>{var h;f.closeMenu(),ue(p,ce.Loose)||(u.preventDefault(),(h=g(e))==null||h.focus())},I(()=>o.value===0)),Z(W,f),de(I(()=>fe(o.value,{[0]:L.Open,[1]:L.Closed}))),()=>{let u={open:o.value===0,close:f.closeMenu};return D({ourProps:{},theirProps:s,slot:u,slots:t,attrs:a,name:"Menu"})}}}),Ee=w({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${N()}`}},setup(s,{attrs:t,slots:a,expose:o}){let e=O("MenuButton");o({el:e.buttonRef,$el:e.buttonRef});function c(r){switch(r.key){case m.Space:case m.Enter:case m.ArrowDown:r.preventDefault(),r.stopPropagation(),e.openMenu(),T(()=>{var n;(n=g(e.itemsRef))==null||n.focus({preventScroll:!0}),e.goToItem(_.First)});break;case m.ArrowUp:r.preventDefault(),r.stopPropagation(),e.openMenu(),T(()=>{var n;(n=g(e.itemsRef))==null||n.focus({preventScroll:!0}),e.goToItem(_.Last)});break}}function l(r){switch(r.key){case m.Space:r.preventDefault();break}}function v(r){s.disabled||(e.menuState.value===0?(e.closeMenu(),T(()=>{var n;return(n=g(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})})):(r.preventDefault(),e.openMenu(),Ce(()=>{var n;return(n=g(e.itemsRef))==null?void 0:n.focus({preventScroll:!0})})))}let d=ve(I(()=>({as:s.as,type:t.type})),e.buttonRef);return()=>{var r;let n={open:e.menuState.value===0},{id:f,...u}=s,p={ref:e.buttonRef,id:f,type:d.value,"aria-haspopup":"menu","aria-controls":(r=g(e.itemsRef))==null?void 0:r.id,"aria-expanded":s.disabled?void 0:e.menuState.value===0,onKeydown:c,onKeyup:l,onClick:v};return D({ourProps:p,theirProps:u,slot:n,attrs:t,slots:a,name:"MenuButton"})}}}),Le=w({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${N()}`}},setup(s,{attrs:t,slots:a,expose:o}){let e=O("MenuItems"),c=b(null);o({el:e.itemsRef,$el:e.itemsRef}),be({container:I(()=>g(e.itemsRef)),enabled:I(()=>e.menuState.value===0),accept(n){return n.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:n.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(n){n.setAttribute("role","none")}});function l(n){var f;switch(c.value&&clearTimeout(c.value),n.key){case m.Space:if(e.searchQuery.value!=="")return n.preventDefault(),n.stopPropagation(),e.search(n.key);case m.Enter:if(n.preventDefault(),n.stopPropagation(),e.activeItemIndex.value!==null){let u=e.items.value[e.activeItemIndex.value];(f=g(u.dataRef.domRef))==null||f.click()}e.closeMenu(),J(g(e.buttonRef));break;case m.ArrowDown:return n.preventDefault(),n.stopPropagation(),e.goToItem(_.Next);case m.ArrowUp:return n.preventDefault(),n.stopPropagation(),e.goToItem(_.Previous);case m.Home:case m.PageUp:return n.preventDefault(),n.stopPropagation(),e.goToItem(_.First);case m.End:case m.PageDown:return n.preventDefault(),n.stopPropagation(),e.goToItem(_.Last);case m.Escape:n.preventDefault(),n.stopPropagation(),e.closeMenu(),T(()=>{var u;return(u=g(e.buttonRef))==null?void 0:u.focus({preventScroll:!0})});break;case m.Tab:n.preventDefault(),n.stopPropagation(),e.closeMenu(),T(()=>he(g(e.buttonRef),n.shiftKey?z.Previous:z.Next));break;default:n.key.length===1&&(e.search(n.key),c.value=setTimeout(()=>e.clearSearch(),350));break}}function v(n){switch(n.key){case m.Space:n.preventDefault();break}}let d=pe(),r=I(()=>d!==null?(d.value&L.Open)===L.Open:e.menuState.value===0);return()=>{var n,f;let u={open:e.menuState.value===0},{id:p,...h}=s,i={"aria-activedescendant":e.activeItemIndex.value===null||(n=e.items.value[e.activeItemIndex.value])==null?void 0:n.id,"aria-labelledby":(f=g(e.buttonRef))==null?void 0:f.id,id:p,onKeydown:l,onKeyup:v,role:"menu",tabIndex:0,ref:e.itemsRef};return D({ourProps:i,theirProps:h,slot:u,attrs:t,slots:a,features:B.RenderStrategy|B.Static,visible:r.value,name:"MenuItems"})}}}),De=w({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${N()}`}},setup(s,{slots:t,attrs:a,expose:o}){let e=O("MenuItem"),c=b(null);o({el:c,$el:c});let l=I(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===s.id:!1),v=ge(c),d=I(()=>({disabled:s.disabled,get textValue(){return v()},domRef:c}));X(()=>e.registerItem(s.id,d)),ee(()=>e.unregisterItem(s.id)),te(()=>{e.menuState.value===0&&l.value&&e.activationTrigger.value!==0&&T(()=>{var i,y;return(y=(i=g(c))==null?void 0:i.scrollIntoView)==null?void 0:y.call(i,{block:"nearest"})})});function r(i){if(s.disabled)return i.preventDefault();e.closeMenu(),J(g(e.buttonRef))}function n(){if(s.disabled)return e.goToItem(_.Nothing);e.goToItem(_.Specific,s.id)}let f=ye();function u(i){f.update(i)}function p(i){f.wasMoved(i)&&(s.disabled||l.value||e.goToItem(_.Specific,s.id,0))}function h(i){f.wasMoved(i)&&(s.disabled||l.value&&e.goToItem(_.Nothing))}return()=>{let{disabled:i}=s,y={active:l.value,disabled:i,close:e.closeMenu},{id:k,...Y}=s;return D({ourProps:{id:k,ref:c,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,disabled:void 0,onClick:r,onFocus:n,onPointerenter:u,onMouseenter:u,onPointermove:p,onMousemove:p,onPointerleave:h,onMouseleave:h},theirProps:{...a,...Y},slot:y,attrs:a,slots:t,name:"MenuItem"})}}});function Oe(s,t){return S(),M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[x("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})])}const Ve={class:"relative z-10 flex"},Ne={class:"px-1 py-1"},je=["onClick"],at=w({__name:"BfTopTileDropdown",props:{values:{default:()=>[]},curValue:{default:null}},emits:["update"],setup(s,{emit:t}){return(a,o)=>(S(),M("div",Ve,[F(A(Pe),{as:"div",class:"relative inline-block text-left"},{default:R(()=>[x("div",null,[F(A(Ee),{class:"transition-colors-default group inline-flex w-full justify-center rounded-md bg-gray-100 px-4 py-2 text-sm font-medium hover:bg-gray-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-100"},{default:R(()=>[se(V(a.curValue?a.curValue:"Seleziona")+" ",1),F(A(Oe),{class:"text-gray-400 group-hover:text-gray-600 -mr-1 ml-2 h-5 w-5 transition-colors-default","aria-hidden":"true"})]),_:1})]),F(ae,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:R(()=>[F(A(Le),{class:"absolute right-0 mt-2 w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-bg-100 shadow-lg ring-1 ring-green-400 ring-opacity-10 focus:outline-none"},{default:R(()=>[x("div",Ne,[(S(!0),M(q,null,G(a.values,(e,c)=>(S(),ie(A(De),null,{default:R(({active:l})=>[x("button",{onClick:v=>t("update",e),type:"button",class:Q([a.curValue&&a.curValue===e?"bg-blue-500 text-blue-50":l?"bg-blue-50 text-blue-800":"","group flex w-full items-center rounded-md px-2 py-2 text-sm font-medium"])},V(e),11,je)]),_:2},1024))),256))])]),_:1})]),_:1})]),_:1})]))}}),Be={class:"flex flex-shrink-0 space-x-1 rounded-md bg-gray-100 p-1",role:"tablist"},ze=["aria-selected","onClick"],Ke={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"svg-image filled h-6 w-6"},Ue=x("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"},null,-1),He=x("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"},null,-1),$e=[Ue,He],qe={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",class:"svg-image stroked h-5 w-5"},Ge=x("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 5.25h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5m-16.5 4.5h16.5"},null,-1),Qe=[Ge],Je={class:"sr-only"},it=w({__name:"BfTopTileViewTab",props:{values:{default:()=>[]},curValue:{default:null}},emits:["update"],setup(s,{emit:t}){const a=[{id:"chart",description:"Grafico",icon:"fa-chart-pie-simple"},{id:"list",description:"Lista",icon:"fa-bars"}];return(o,e)=>{const c=re("bf-tooltip");return S(),M("div",Be,[(S(),M(q,null,G(a,l=>le(x("button",{class:Q(["transition-colors-default flex flex-shrink-0 h-7 w-10 items-center justify-center rounded text-gray-400 hover:bg-bg-100/50",o.curValue===l.id?"!bg-bg-100":""]),role:"tab",type:"button","aria-selected":o.curValue===l.id,onClick:v=>t("update",l.id)},[l.id==="chart"?(S(),M("svg",Ke,$e)):(S(),M("svg",qe,Qe)),x("span",Je,V(l.description),1)],10,ze),[[c,l.description]])),64))])}}}),We={SELECT:"select"};class Ye extends Fe{constructor(t,a,o,e){super(t),this.selected=a,this.deselected=o,this.mapBrowserEvent=e}}const E={};class j extends xe{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:Se,this.addCondition_=t.addCondition?t.addCondition:K,this.removeCondition_=t.removeCondition?t.removeCondition:K,this.toggleCondition_=t.toggleCondition?t.toggleCondition:Ie,this.multi_=t.multi?t.multi:!1,this.filter_=t.filter?t.filter:U,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=t.style!==void 0?t.style:Ze(),this.features_=t.features||new Me;let a;if(t.layers)if(typeof t.layers=="function")a=t.layers;else{const o=t.layers;a=function(e){return o.includes(e)}}else a=U;this.layerFilter_=a,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,a){this.featureLayerAssociation_[C(t)]=a}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[C(t)]}setHitTolerance(t){this.hitTolerance_=t}setMap(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(t),t?(this.features_.addEventListener(P.ADD,this.boundAddFeature_),this.features_.addEventListener(P.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(P.ADD,this.boundAddFeature_),this.features_.removeEventListener(P.REMOVE,this.boundRemoveFeature_))}addFeature_(t){const a=t.element;if(this.style_&&this.applySelectedStyle_(a),!this.getLayer(a)){const o=this.getMap().getAllLayers().find(function(e){if(e instanceof Te&&e.getSource()&&e.getSource().hasFeature(a))return e});o&&this.addFeatureLayerAssociation_(a,o)}}removeFeature_(t){this.style_&&this.restorePreviousStyle_(t.element)}getStyle(){return this.style_}applySelectedStyle_(t){const a=C(t);a in E||(E[a]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){const a=this.getMap().getInteractions().getArray();for(let e=a.length-1;e>=0;--e){const c=a[e];if(c!==this&&c instanceof j&&c.getStyle()&&c.getFeatures().getArray().lastIndexOf(t)!==-1){t.setStyle(c.getStyle());return}}const o=C(t);t.setStyle(E[o]),delete E[o]}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[C(t)]}handleEvent(t){if(!this.condition_(t))return!0;const a=this.addCondition_(t),o=this.removeCondition_(t),e=this.toggleCondition_(t),c=!a&&!o&&!e,l=t.map,v=this.getFeatures(),d=[],r=[];if(c){we(this.featureLayerAssociation_),l.forEachFeatureAtPixel(t.pixel,(n,f)=>{if(!(!(n instanceof H)||!this.filter_(n,f)))return this.addFeatureLayerAssociation_(n,f),r.push(n),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let n=v.getLength()-1;n>=0;--n){const f=v.item(n),u=r.indexOf(f);u>-1?r.splice(u,1):(v.remove(f),d.push(f))}r.length!==0&&v.extend(r)}else{l.forEachFeatureAtPixel(t.pixel,(n,f)=>{if(!(!(n instanceof H)||!this.filter_(n,f)))return(a||e)&&!v.getArray().includes(n)?(this.addFeatureLayerAssociation_(n,f),r.push(n)):(o||e)&&v.getArray().includes(n)&&(d.push(n),this.removeFeatureLayerAssociation_(n)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let n=d.length-1;n>=0;--n)v.remove(d[n]);v.extend(r)}return(r.length>0||d.length>0)&&this.dispatchEvent(new Ye(We.SELECT,r,d,t)),!0}}function Ze(){const s=ke();return $(s.Polygon,s.LineString),$(s.GeometryCollection,s.LineString),function(t){return t.getGeometry()?s[t.getGeometry().getType()]:null}}const rt=j;export{Pe as M,Ee as R,rt as S,at as _,it as a,Le as h,De as y};

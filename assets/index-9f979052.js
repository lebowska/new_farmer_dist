import{_ as xe}from"./MainTile-62fe8bf1.js";import{o as w,b as $,e,d as L,k as S,c as R,X as P,q as ge,s as J,L as Q,z as ne,F as Y,x as ae,v as he,O as pe,y as _e,r as U,n as j,t as M,f as q,D as K,m as V,H as ve,C as ye,l as k,w as A,p as ie,a as W,T as we}from"./index-1e2bbd56.js";import{r as Ie,n as Oe,_ as fe}from"./BfModal-c5f55e49.js";import{_ as X}from"./BfButton-6f97ef38.js";import{a as Se,b as re,u as $e,d as ue,e as de,_ as Ce}from"./BfFormGroup-7e6ac52e.js";import{_ as ce}from"./BfFormSelect-357d458c.js";import{t as ke,_ as Re}from"./ChartComponent-9571b0c8.js";import{d as Te,e as Ae,r as Pe}from"./CheckCircleIcon-b61598eb.js";import{k as Ve,E as Me,w as De}from"./radio-group-c1317ba8.js";import{u as H,o as E,F as Fe,c as Ne,l as Z,K as Ee,H as te,e as me,t as se,N as ee,p as ze,O as Be,a as B}from"./use-outside-click-71da6d68.js";import{x as Le,a as F,u as He}from"./use-text-value-da7e282d.js";import{p as je}from"./use-tree-walker-13df2847.js";import{f as Ke,a as Ye}from"./description-c63fabfb.js";import"./use-root-containers-69ce475c.js";import"./micro-task-89dcd6af.js";import"./plugin-vue_export-helper-c27b6911.js";function Ue(l,n){return w(),$("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.182 16.318A4.486 4.486 0 0012.016 15a4.486 4.486 0 00-3.198 1.318M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z"})])}function qe(l,n){return l===n}var Ge=(l=>(l[l.Open=0]="Open",l[l.Closed=1]="Closed",l))(Ge||{}),Je=(l=>(l[l.Single=0]="Single",l[l.Multi=1]="Multi",l))(Je||{}),Qe=(l=>(l[l.Pointer=0]="Pointer",l[l.Other=1]="Other",l))(Qe||{});let be=Symbol("ComboboxContext");function le(l){let n=_e(be,null);if(n===null){let y=new Error(`<${l} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(y,le),y}return n}let We=L({name:"Combobox",emits:{"update:modelValue":l=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>qe},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(l,{slots:n,attrs:y,emit:g}){let a=S(1),t=S(null),s=S(null),r=S(null),p=S(null),m=S({static:!1,hold:!1}),h=S([]),d=S(null),c=S(1),x=S(!1);function C(u=v=>v){let v=d.value!==null?h.value[d.value]:null,f=Be(u(h.value.slice()),O=>E(O.dataRef.domRef)),i=v?f.indexOf(v):null;return i===-1&&(i=null),{options:f,activeOptionIndex:i}}let D=R(()=>l.multiple?1:0),o=R(()=>l.nullable),[_,I]=Te(R(()=>l.modelValue===void 0?H(D.value,{[1]:[],[0]:void 0}):l.modelValue),u=>g("update:modelValue",u),R(()=>l.defaultValue)),b={comboboxState:a,value:_,mode:D,compare(u,v){if(typeof l.by=="string"){let f=l.by;return u?.[f]===v?.[f]}return l.by(u,v)},defaultValue:R(()=>l.defaultValue),nullable:o,inputRef:s,labelRef:t,buttonRef:r,optionsRef:p,disabled:R(()=>l.disabled),options:h,change(u){I(u)},activeOptionIndex:R(()=>{if(x.value&&d.value===null&&h.value.length>0){let u=h.value.findIndex(v=>!v.dataRef.disabled);u!==-1&&(d.value=u)}return d.value}),activationTrigger:c,optionsPropsRef:m,closeCombobox(){x.value=!1,!l.disabled&&a.value!==1&&(a.value=1,d.value=null)},openCombobox(){if(x.value=!0,l.disabled||a.value===0)return;let u=h.value.findIndex(v=>{let f=P(v.dataRef.value);return H(D.value,{[0]:()=>b.compare(P(b.value.value),P(f)),[1]:()=>P(b.value.value).some(i=>b.compare(P(i),P(f)))})});u!==-1&&(d.value=u),a.value=0},goToOption(u,v,f){if(x.value=!1,l.disabled||p.value&&!m.value.static&&a.value===1)return;let i=C();if(i.activeOptionIndex===null){let T=i.options.findIndex(G=>!G.dataRef.disabled);T!==-1&&(i.activeOptionIndex=T)}let O=Le(u===F.Specific?{focus:F.Specific,id:v}:{focus:u},{resolveItems:()=>i.options,resolveActiveIndex:()=>i.activeOptionIndex,resolveId:T=>T.id,resolveDisabled:T=>T.dataRef.disabled});d.value=O,c.value=f??1,h.value=i.options},selectOption(u){let v=h.value.find(i=>i.id===u);if(!v)return;let{dataRef:f}=v;I(H(D.value,{[0]:()=>f.value,[1]:()=>{let i=P(b.value.value).slice(),O=P(f.value),T=i.findIndex(G=>b.compare(O,P(G)));return T===-1?i.push(O):i.splice(T,1),i}}))},selectActiveOption(){if(b.activeOptionIndex.value===null)return;let{dataRef:u,id:v}=h.value[b.activeOptionIndex.value];I(H(D.value,{[0]:()=>u.value,[1]:()=>{let f=P(b.value.value).slice(),i=P(u.value),O=f.findIndex(T=>b.compare(i,P(T)));return O===-1?f.push(i):f.splice(O,1),f}})),b.goToOption(F.Specific,v)},registerOption(u,v){let f={id:u,dataRef:v},i=C(O=>[...O,f]);if(d.value===null){let O=v.value.value;H(D.value,{[0]:()=>b.compare(P(b.value.value),P(O)),[1]:()=>P(b.value.value).some(T=>b.compare(P(T),P(O)))})&&(i.activeOptionIndex=i.options.indexOf(f))}h.value=i.options,d.value=i.activeOptionIndex,c.value=1,i.options.some(O=>!E(O.dataRef.domRef))&&requestAnimationFrame(()=>{let O=C();h.value=O.options,d.value=O.activeOptionIndex})},unregisterOption(u){var v;b.activeOptionIndex.value!==null&&((v=b.options.value[b.activeOptionIndex.value])==null?void 0:v.id)===u&&(x.value=!0);let f=C(i=>{let O=i.findIndex(T=>T.id===u);return O!==-1&&i.splice(O,1),i});h.value=f.options,d.value=f.activeOptionIndex,c.value=1}};Fe([s,r,p],()=>b.closeCombobox(),R(()=>a.value===0)),ge(be,b),Ne(R(()=>H(a.value,{[0]:Z.Open,[1]:Z.Closed})));let N=R(()=>b.activeOptionIndex.value===null?null:h.value[b.activeOptionIndex.value].dataRef.value),z=R(()=>{var u;return(u=E(s))==null?void 0:u.closest("form")});return J(()=>{Q([z],()=>{if(!z.value||l.defaultValue===void 0)return;function u(){b.change(l.defaultValue)}return z.value.addEventListener("reset",u),()=>{var v;(v=z.value)==null||v.removeEventListener("reset",u)}},{immediate:!0})}),()=>{let{name:u,disabled:v,form:f,...i}=l,O={open:a.value===0,disabled:v,activeIndex:b.activeOptionIndex.value,activeOption:N.value,value:_.value};return ne(Y,[...u!=null&&_.value!=null?Ae({[u]:_.value}).map(([T,G])=>ne(Ke,Ee({features:Ye.Hidden,key:T,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:f,name:T,value:G}))):[],te({theirProps:{...y,...me(i,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:O,slots:n,attrs:y,name:"Combobox"})])}}}),Xe=L({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${se()}`}},emits:{change:l=>!0},setup(l,{emit:n,attrs:y,slots:g,expose:a}){let t=le("ComboboxInput"),s={value:!1};a({el:t.inputRef,$el:t.inputRef});let r=R(()=>{var o;let _=t.value.value;return E(t.inputRef)?typeof l.displayValue<"u"&&_!==void 0?(o=l.displayValue(_))!=null?o:"":typeof _=="string"?_:"":""});J(()=>{Q([r,t.comboboxState],([o,_],[I,b])=>{if(s.value)return;let N=E(t.inputRef);N&&(b===0&&_===1||o!==I)&&(N.value=o)},{immediate:!0}),Q([t.comboboxState],([o],[_])=>{if(o===0&&_===1){let I=E(t.inputRef);if(!I)return;let b=I.value,{selectionStart:N,selectionEnd:z,selectionDirection:u}=I;I.value="",I.value=b,u!==null?I.setSelectionRange(N,z,u):I.setSelectionRange(N,z)}})});let p=S(!1),m=S(null);function h(){p.value=!0}function d(){Ie().nextFrame(()=>{p.value=!1,m.value&&(t.openCombobox(),n("change",m.value),m.value=null)})}function c(o){switch(s.value=!0,o.key){case B.Backspace:case B.Delete:if(t.mode.value!==0||!t.nullable.value)return;let _=o.currentTarget;requestAnimationFrame(()=>{if(_.value===""){t.change(null);let I=E(t.optionsRef);I&&(I.scrollTop=0),t.goToOption(F.Nothing)}});break;case B.Enter:if(s.value=!1,t.comboboxState.value!==0||p.value)return;if(o.preventDefault(),o.stopPropagation(),t.activeOptionIndex.value===null){t.closeCombobox();return}t.selectActiveOption(),t.mode.value===0&&t.closeCombobox();break;case B.ArrowDown:return s.value=!1,o.preventDefault(),o.stopPropagation(),H(t.comboboxState.value,{[0]:()=>t.goToOption(F.Next),[1]:()=>t.openCombobox()});case B.ArrowUp:return s.value=!1,o.preventDefault(),o.stopPropagation(),H(t.comboboxState.value,{[0]:()=>t.goToOption(F.Previous),[1]:()=>{t.openCombobox(),pe(()=>{t.value.value||t.goToOption(F.Last)})}});case B.Home:if(o.shiftKey)break;return s.value=!1,o.preventDefault(),o.stopPropagation(),t.goToOption(F.First);case B.PageUp:return s.value=!1,o.preventDefault(),o.stopPropagation(),t.goToOption(F.First);case B.End:if(o.shiftKey)break;return s.value=!1,o.preventDefault(),o.stopPropagation(),t.goToOption(F.Last);case B.PageDown:return s.value=!1,o.preventDefault(),o.stopPropagation(),t.goToOption(F.Last);case B.Escape:if(s.value=!1,t.comboboxState.value!==0)return;o.preventDefault(),t.optionsRef.value&&!t.optionsPropsRef.value.static&&o.stopPropagation(),t.closeCombobox();break;case B.Tab:if(s.value=!1,t.comboboxState.value!==0)return;t.mode.value===0&&t.selectActiveOption(),t.closeCombobox();break}}function x(o){if(p.value){m.value=o;return}t.openCombobox(),n("change",o)}function C(){s.value=!1}let D=R(()=>{var o,_,I,b;return(b=(I=(_=l.defaultValue)!=null?_:t.defaultValue.value!==void 0?(o=l.displayValue)==null?void 0:o.call(l,t.defaultValue.value):null)!=null?I:t.defaultValue.value)!=null?b:""});return()=>{var o,_,I,b,N,z;let u={open:t.comboboxState.value===0},{id:v,displayValue:f,onChange:i,...O}=l,T={"aria-controls":(o=t.optionsRef.value)==null?void 0:o.id,"aria-expanded":t.disabled.value?void 0:t.comboboxState.value===0,"aria-activedescendant":t.activeOptionIndex.value===null||(_=t.options.value[t.activeOptionIndex.value])==null?void 0:_.id,"aria-labelledby":(N=(I=E(t.labelRef))==null?void 0:I.id)!=null?N:(b=E(t.buttonRef))==null?void 0:b.id,"aria-autocomplete":"list",id:v,onCompositionstart:h,onCompositionend:d,onKeydown:c,onInput:x,onBlur:C,role:"combobox",type:(z=y.type)!=null?z:"text",tabIndex:0,ref:t.inputRef,defaultValue:D.value,disabled:t.disabled.value===!0?!0:void 0};return te({ourProps:T,theirProps:O,slot:u,attrs:y,slots:g,features:ee.RenderStrategy|ee.Static,name:"ComboboxInput"})}}}),Ze=L({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(l,{attrs:n,slots:y,expose:g}){let a=le("ComboboxOptions"),t=`headlessui-combobox-options-${se()}`;g({el:a.optionsRef,$el:a.optionsRef}),ae(()=>{a.optionsPropsRef.value.static=l.static}),ae(()=>{a.optionsPropsRef.value.hold=l.hold});let s=ze(),r=R(()=>s!==null?(s.value&Z.Open)===Z.Open:a.comboboxState.value===0);return je({container:R(()=>E(a.optionsRef)),enabled:R(()=>a.comboboxState.value===0),accept(p){return p.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:p.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(p){p.setAttribute("role","none")}}),()=>{var p,m,h;let d={open:a.comboboxState.value===0},c={"aria-labelledby":(h=(p=E(a.labelRef))==null?void 0:p.id)!=null?h:(m=E(a.buttonRef))==null?void 0:m.id,id:t,ref:a.optionsRef,role:"listbox","aria-multiselectable":a.mode.value===1?!0:void 0},x=me(l,["hold"]);return te({ourProps:c,theirProps:x,slot:d,attrs:n,slots:y,features:ee.RenderStrategy|ee.Static,visible:r.value,name:"ComboboxOptions"})}}}),et=L({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(l,{slots:n,attrs:y,expose:g}){let a=le("ComboboxOption"),t=`headlessui-combobox-option-${se()}`,s=S(null);g({el:s,$el:s});let r=R(()=>a.activeOptionIndex.value!==null?a.options.value[a.activeOptionIndex.value].id===t:!1),p=R(()=>H(a.mode.value,{[0]:()=>a.compare(P(a.value.value),P(l.value)),[1]:()=>P(a.value.value).some(o=>a.compare(P(o),P(l.value)))})),m=R(()=>({disabled:l.disabled,value:l.value,domRef:s}));J(()=>a.registerOption(t,m)),he(()=>a.unregisterOption(t)),ae(()=>{a.comboboxState.value===0&&r.value&&a.activationTrigger.value!==0&&pe(()=>{var o,_;return(_=(o=E(s))==null?void 0:o.scrollIntoView)==null?void 0:_.call(o,{block:"nearest"})})});function h(o){if(l.disabled)return o.preventDefault();a.selectOption(t),a.mode.value===0&&a.closeCombobox(),Oe()||requestAnimationFrame(()=>{var _;return(_=E(a.inputRef))==null?void 0:_.focus()})}function d(){if(l.disabled)return a.goToOption(F.Nothing);a.goToOption(F.Specific,t)}let c=He();function x(o){c.update(o)}function C(o){c.wasMoved(o)&&(l.disabled||r.value||a.goToOption(F.Specific,t,0))}function D(o){c.wasMoved(o)&&(l.disabled||r.value&&(a.optionsPropsRef.value.hold||a.goToOption(F.Nothing)))}return()=>{let{disabled:o}=l,_={active:r.value,selected:p.value,disabled:o},I={id:t,ref:s,role:"option",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,"aria-selected":p.value,disabled:void 0,onClick:h,onFocus:d,onPointerenter:x,onMouseenter:x,onPointermove:C,onMousemove:C,onPointerleave:D,onMouseleave:D};return te({ourProps:I,theirProps:l,slot:_,attrs:y,slots:n,name:"ComboboxOption"})}}});function tt(l,n){return w(),$("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})])}const oe=[{name:"Pomi d'oro & Co.",cuaa:"RLALWR34J23K934",totalYield:"56.2",unit:"ton",yieldPerHa:"1.8",isInDanger:!1},{name:"Pomodorini e pomodoroni",cuaa:"KRJAVA00H00M834",totalYield:"89.3",unit:"ton",yieldPerHa:"2.3",isInDanger:!1},{name:"La pummarola snc",cuaa:"JMKMB03NM83O345",totalYield:"75.3",unit:"ton",yieldPerHa:"0.8",isInDanger:!0},{name:"Tom Ato",cuaa:"QRQTBH74U73Q834",totalYield:"36.8",unit:"ton",yieldPerHa:"2.8",isInDanger:!1}],lt=[{id:"yield",name:"Resa",category:"Azienda"},{id:"water",name:"Bilancio idrico",category:"Monitoraggio"},{id:"npk",name:"NPK",category:"Monitoraggio"}],at={class:"flex flex-col w-full h-full"},ot=ve('<div class="flex flex-col items-start justify-between gap-x-8 gap-y-4 bg-gray-50 px-4 py-4 sm:flex-row sm:items-center sm:px-6 lg:px-8 -mt-px"><div><div class="flex items-center gap-x-3"><h1 class="flex gap-x-3 text-base leading-7"><span class="font-semibold text-text">Azienda</span><span class="text-gray-600">/</span><span class="font-semibold text-text">Resa</span></h1></div><p class="mt-2 text-xs leading-6 text-gray-500">Compara le rese delle tue aziende</p></div><button type="button" class="cursor-pointer order-first flex-none rounded-full bg-blue-400/10 hover:bg-blue-400/20 px-2 py-1 text-xs font-medium text-blue-400 ring-1 ring-inset ring-blue-400/30 sm:order-none"><i class="fas fa-arrows-rotate pr-2"></i> Aggiorna </button></div>',1),st={class:"grid grid-cols-1 bg-gray-50 sm:grid-cols-2 lg:grid-cols-4 border-b"},nt={class:"text-sm font-medium leading-6 text-gray-500"},it={class:"mt-2 flex items-baseline gap-x-2"},rt={class:"text-3xl font-medium tracking-tight text-text"},ut={key:0,class:"text-sm text-gray-500"},dt={class:"mt-10 w-full whitespace-nowrap text-left"},ct=e("colgroup",null,[e("col",{class:"w-full sm:w-4/12"}),e("col",{class:"lg:w-4/12"}),e("col",{class:"lg:w-2/12"}),e("col",{class:"lg:w-1/12"}),e("col",{class:"lg:w-1/12"})],-1),pt=e("thead",{class:"border-b text-sm leading-6 text-text"},[e("tr",null,[e("th",{scope:"col",class:"py-2 pl-4 pr-8 font-semibold sm:pl-6 lg:pl-8"},"Azienda"),e("th",{scope:"col",class:"hidden py-2 pl-0 pr-8 font-semibold sm:table-cell"},"Resa totale"),e("th",{scope:"col",class:"py-2 pl-0 pr-4 text-right font-semibold sm:pr-8 sm:text-left lg:pr-20"}," Resa per ettaro ")])],-1),vt={class:"divide-y divide-border"},ft={class:"py-4 pl-4 pr-8 sm:pl-6 lg:pl-8"},mt={class:"flex items-center gap-x-4"},bt={class:"truncate text-sm font-medium leading-6 text-text"},xt={class:"text-gray-400 pl-2"},gt={class:"hidden py-4 pl-0 pr-8 text-sm leading-6 md:table-cell lg:pr-20"},ht={class:"hidden py-4 pl-0 pr-8 text-sm leading-6 md:table-cell lg:pr-20"},_t={class:"flex items-center"},yt={key:0,class:"flex-none rounded-full bg-red-400/10 p-1 ml-2"},wt=e("div",{class:"h-2 w-2 rounded-full bg-red-400"},null,-1),It=[wt],Ot=L({__name:"yieldTab",setup(l){const n=oe,y=n.reduce((r,p)=>r+parseFloat(p.totalYield),0),g=n.reduce((r,p)=>r+parseFloat(p.yieldPerHa),0),a=y/n.length,t=g/n.length,s=[{name:"Aziende totali",value:n.length.toString(),unit:""},{name:"Resa totale",value:y.toFixed(1),unit:"ton"},{name:"Rendimento medio per az.",value:a.toFixed(1),unit:"ton"},{name:"Rendimento medio per ha",value:t.toFixed(1),unit:"ton"}];return(r,p)=>(w(),$("div",at,[ot,e("div",st,[(w(),$(Y,null,U(s,(m,h)=>e("div",{key:m.name,class:j([h%2===1?"sm:border-l":h===2?"lg:border-l":"","border-t py-6 px-4 sm:px-6 lg:px-8"])},[e("p",nt,M(m.name),1),e("p",it,[e("span",rt,M(m.value),1),m.unit?(w(),$("span",ut,M(m.unit),1)):q("",!0)])],2)),64))]),e("table",dt,[ct,pt,e("tbody",vt,[(w(!0),$(Y,null,U(V(n),(m,h)=>(w(),$("tr",{key:h},[e("td",ft,[e("div",mt,[e("div",bt,[e("span",null,M(m.name),1),e("span",xt,M(m.cuaa),1)])])]),e("td",gt,M(m.totalYield+" "+m.unit),1),e("td",ht,[e("span",_t,[K(M(m.yieldPerHa+" "+m.unit)+" ",1),m.isInDanger?(w(),$("div",yt,It)):q("",!0)])])]))),128))])])]))}}),St={class:"relative flex h-full w-full pb-4 pt-4"},$t=L({__name:"npkChart",props:{npkItems:{},yieldItems:{}},emits:["close"],setup(l,{emit:n}){const y=ye(),g=S(!1);let a=!1;const t=S(0),s=S(null);S([]),S([]),ke.color;let r=[],p=[];J(async()=>{l.npkItems.length>0&&l.yieldItems.length>0?m():a=!0}),Q(()=>y.darkMode,async()=>{m(!0)});function m(d=!1){if(l.npkItems.length===0||l.yieldItems.length===0){a=!0;return}p=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],r=[];const c=[],x=[];l.yieldItems.forEach(C=>{c.findIndex(D=>D.id===C.cuaa)===-1&&c.push({id:C.cuaa,name:C.name})}),c.forEach((C,D)=>{const o={id:"line_"+C.id,name:C.name,smooth:!0,lineStyle:{width:2},symbolSize:6,type:"line",data:l.npkItems.filter(_=>_.cuaa===C.id).map(_=>_.nitrogen)};x.push(o)}),r.push(...x),h(),d&&t.value++}function h(){s.value={grid:{top:40,right:20,left:20,bottom:20,containLabel:!0},tooltip:{trigger:"axis",confine:!0},legend:{show:!0},xAxis:{type:"category",data:p},yAxis:[{type:"value",name:"",position:"left"}],series:r,textStyle:{fontFamily:"Work Sans"}}}return(d,c)=>(w(),$("div",St,[k(Re,{options:s.value,loading:g.value,"no-data":V(a),"disable-theme-refresh":!0,rebuild:t.value},null,8,["options","loading","no-data","rebuild"])]))}}),Ct={class:"w-full h-full px-4 pt-4"},kt={key:0},Rt=e("div",{class:"mx-2 pt-4 pb-4"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Tipologia")],-1),Tt={class:"px-2"},At={class:"w-full flex space-x-3"},Pt={class:"flex"},Vt={class:"flex flex-1"},Mt={class:"flex flex-col"},Dt={class:"flex w-full h-full items-center justify-center pt-2 text-gray-400",style:{"font-size":"1.3rem"}},Ft=e("div",{class:"mx-2 pt-4 pb-4"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Riempimento")],-1),Nt={class:"pt-4 px-2"},Et=e("i",{class:"fa-light fa-chart-simple"},null,-1),zt=e("i",{class:"fa-light fa-arrow-turn-down-left"},null,-1),Bt={key:1,class:"w-full h-full"},Lt=L({__name:"chartCreationModal",props:{npkItems:{},yieldItems:{}},emits:["close"],setup(l,{emit:n}){const y=S(!1),g=S(!1),a=S(!1),t=S(!1),s=S(""),r=[{id:"bar",icon:"fa-light fa-chart-simple",label:"Barre"},{id:"line",icon:"fa-light fa-chart-line",label:"Linee"},{id:"pie",icon:"fa-light fa-chart-pie",label:"Torta"},{id:"radar",icon:"fa-light fa-chart-radar",label:"Radar"}],p=[{id:"month",label:"Mese"}],m=[{id:"n",label:"Azoto"},{id:"p",label:"Potassio"},{id:"k",label:"Fosforo"}],h=S("");function d(v){h.value=v}const c={xAxisType:"",yAxisType:""},x=Se({xAxisType:re().nullable(!0).required(),yAxisType:re().nullable(!0).required()}),{handleSubmit:C,resetForm:D,setValues:o,setFieldValue:_,errors:I}=$e({initialValues:c,validationSchema:x}),{value:b}=ue("xAxisType"),{value:N}=ue("yAxisType"),z=C(async v=>{g.value=!0,a.value=!1,y.value=!1;try{await new Promise(f=>setTimeout(f,2e3)),g.value=!1,y.value=!0,t.value=!0}catch(f){a.value=!0,s.value=f.message,g.value=!1}});function u(v){D()}return(v,f)=>(w(),$("div",Ct,[t.value?(w(),$("div",Bt,[k($t,{npkItems:v.npkItems,yieldItems:v.yieldItems},null,8,["npkItems","yieldItems"])])):(w(),$("div",kt,[k(Ce,{onSubmit:V(z),onReset:u,ref:"form"},{default:A(()=>[Rt,e("div",Tt,[k(V(Ve),{"model-value":h.value,"onUpdate:modelValue":d},{default:A(()=>[e("div",At,[(w(),$(Y,null,U(r,i=>k(V(Me),{as:"template",key:i.id,value:i.id},{default:A(({checked:O,active:T})=>[e("div",{class:j([O?"border-transparent":"",T?"border-blue-600 ring-4 ring-blue-100 ring-offset-0":"","relative flex-grow flex flex-col w-6/12 cursor-pointer rounded-lg border bg-bg-100 p-4 focus:outline-none transition-colors-default hover:bg-blue-50 h-24"])},[e("div",Pt,[e("div",Vt,[e("div",Mt,[k(V(De),{as:"span",class:"block text-sm font-medium text-gray-900"},{default:A(()=>[K(M(i.label),1)]),_:2},1024)])]),k(V(Pe),{class:j([O?"":"invisible","h-5 w-5 text-blue-600"]),"aria-hidden":"true"},null,8,["class"]),e("span",{class:j([O?"border-blue-600":"border-transparent","border-2","pointer-events-none absolute -inset-px rounded-lg"]),"aria-hidden":"true"},null,2)]),e("div",Dt,[e("i",{class:j(i.icon),"aria-hidden":"true"},null,2)])],2)]),_:2},1032,["value"])),64))])]),_:1},8,["model-value"])]),Ft,k(de,{"for-id":"ccm-1",label:"Asse x",state:V(I).xAxisType?!1:null,"invalid-message":V(I).xAxisType},{default:A(()=>[k(ce,{id:"nfi-1",modelValue:V(b),"onUpdate:modelValue":f[0]||(f[0]=i=>ie(b)?b.value=i:null),items:p,state:V(I).xAxisType?!1:null},null,8,["modelValue","state"])]),_:1},8,["state","invalid-message"]),k(de,{"for-id":"ccm-2",label:"Asse y",state:V(I).yAxisType?!1:null,"invalid-message":V(I).yAxisType},{default:A(()=>[k(ce,{id:"nfi-1",modelValue:V(N),"onUpdate:modelValue":f[1]||(f[1]=i=>ie(N)?N.value=i:null),items:m,state:V(I).yAxisType?!1:null},null,8,["modelValue","state"])]),_:1},8,["state","invalid-message"]),e("div",Nt,[k(X,{"is-submit":"","is-loading":g.value,disabled:g.value,"is-success":"",class:"mr-2"},{icon:A(()=>[Et]),default:A(()=>[K(" Crea grafico ")]),_:1},8,["is-loading","disabled"]),k(X,{onClick:f[2]||(f[2]=i=>n("close")),disabled:g.value,"is-outlined":"","is-secondary":""},{icon:A(()=>[zt]),default:A(()=>[K(" Indietro ")]),_:1},8,["disabled"])])]),_:1},8,["onSubmit"])]))]))}}),Ht={class:"flex flex-col w-full h-full"},jt=ve('<div><div class="flex items-center gap-x-3"><h1 class="flex gap-x-3 text-base leading-7"><span class="font-semibold text-text">Monitoraggio</span><span class="text-gray-600">/</span><span class="font-semibold text-text">NPK</span></h1></div><p class="mt-2 text-xs leading-6 text-gray-500">Analizza i valori NPK nel tempo</p></div>',1),Kt=e("i",{class:"fas fa-chart-simple pr-2"},null,-1),Yt=e("button",{type:"button",class:"cursor-pointer order-first flex-none rounded-full bg-blue-400/10 hover:bg-blue-400/20 px-2 py-1 text-xs font-medium text-blue-400 ring-1 ring-inset ring-blue-400/30 sm:order-none"},[e("i",{class:"fas fa-arrows-rotate pr-2"}),K(" Aggiorna ")],-1),Ut={class:"grid grid-cols-1 bg-gray-50 sm:grid-cols-2 lg:grid-cols-4 border-b"},qt={class:"text-sm font-medium leading-6 text-gray-500"},Gt={class:"mt-2 flex items-baseline gap-x-2"},Jt={class:"text-3xl font-medium tracking-tight text-text"},Qt={key:0,class:"text-sm text-gray-500"},Wt={class:"mt-10 w-full whitespace-nowrap text-left"},Xt=e("colgroup",null,[e("col",{class:"w-full sm:w-4/12"}),e("col",{class:"lg:w-4/12"}),e("col",{class:"lg:w-2/12"}),e("col",{class:"lg:w-1/12"}),e("col",{class:"lg:w-1/12"})],-1),Zt=e("thead",{class:"border-b text-sm leading-6 text-text"},[e("tr",null,[e("th",{scope:"col",class:"py-2 pl-4 pr-8 font-semibold sm:pl-6 lg:pl-8"},"Azienda"),e("th",{scope:"col",class:"hidden py-2 pl-0 pr-8 font-semibold sm:table-cell"},"Mese"),e("th",{scope:"col",class:"py-2 pl-0 pr-4 text-right font-semibold sm:pr-8 sm:text-left lg:pr-20"},"N"),e("th",{scope:"col",class:"py-2 pl-0 pr-4 text-right font-semibold sm:pr-8 sm:text-left lg:pr-20"},"P"),e("th",{scope:"col",class:"py-2 pl-0 pr-4 text-right font-semibold sm:pr-8 sm:text-left lg:pr-20"},"K")])],-1),el={class:"divide-y divide-border"},tl={class:"py-4 pl-4 pr-8 sm:pl-6 lg:pl-8"},ll={class:"flex items-center gap-x-4"},al={class:"truncate text-sm font-medium leading-6 text-text"},ol={class:"text-gray-400 pl-2"},sl={class:"hidden py-4 pl-0 pr-8 text-sm leading-6 md:table-cell lg:pr-20"},nl={class:"hidden py-4 pl-0 pr-8 text-sm leading-6 md:table-cell lg:pr-20"},il={class:"flex items-center"},rl={key:0,class:"flex-none rounded-full bg-red-400/10 p-1 ml-2"},ul=e("div",{class:"h-2 w-2 rounded-full bg-red-400"},null,-1),dl=[ul],cl={class:"hidden py-4 pl-0 pr-8 text-sm leading-6 md:table-cell lg:pr-20"},pl={class:"flex items-center"},vl={class:"hidden py-4 pl-0 pr-8 text-sm leading-6 md:table-cell lg:pr-20"},fl={class:"flex items-center"},ml=e("i",{class:"fal fa-arrow-left"},null,-1),bl=L({__name:"npkTab",setup(l){const n=S([]),y=oe,g=S(!1),a=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"];J(()=>{oe.forEach(d=>{a.forEach((c,x)=>{const C={name:d.name,cuaa:d.cuaa,monthIndex:x,monthDescription:c,nitrogen:d.isInDanger?Math.floor(Math.random()*30)/10:Math.floor(Math.random()*100)/10,phosphorus:Math.floor(Math.random()*100)/10,potassium:Math.floor(Math.random()*100)/10};n.value.push(C)})})});function t(d){return y.find(c=>c.cuaa===d)?.isInDanger}const s=R(()=>n.value.reduce((d,c)=>d+c.nitrogen,0)/n.value.length),r=R(()=>n.value.reduce((d,c)=>d+c.phosphorus,0)/n.value.length),p=R(()=>n.value.reduce((d,c)=>d+c.potassium,0)/n.value.length),m=R(()=>[{name:"Aziende totali",value:y.length.toString(),unit:""},{name:"Media Azoto",value:s.value.toFixed(1),unit:""},{name:"Media Fosforo",value:r.value.toFixed(1),unit:""},{name:"Media Potassio",value:p.value.toFixed(1),unit:""}]);function h(){g.value=!0}return(d,c)=>(w(),$("div",Ht,[e("div",{class:"flex flex-col items-start justify-between gap-x-8 gap-y-4 bg-gray-50 px-4 py-4 sm:flex-row sm:items-center sm:px-6 lg:px-8 -mt-px"},[jt,e("div",{class:"flex space-x-2"},[e("button",{type:"button",onClick:h,class:"cursor-pointer order-first flex-none rounded-full bg-blue-400/10 hover:bg-blue-400/20 px-2 py-1 text-xs font-medium text-blue-400 ring-1 ring-inset ring-blue-400/30 sm:order-none"},[Kt,K(" Crea grafico ")]),Yt])]),e("div",Ut,[(w(!0),$(Y,null,U(m.value,(x,C)=>(w(),$("div",{key:x.name,class:j([C%2===1?"sm:border-l":C===2?"lg:border-l":"","border-t py-6 px-4 sm:px-6 lg:px-8"])},[e("p",qt,M(x.name),1),e("p",Gt,[e("span",Jt,M(x.value),1),x.unit?(w(),$("span",Qt,M(x.unit),1)):q("",!0)])],2))),128))]),e("table",Wt,[Xt,Zt,e("tbody",el,[(w(!0),$(Y,null,U(n.value,(x,C)=>(w(),$("tr",{key:C},[e("td",tl,[e("div",ll,[e("div",al,[e("span",null,M(x.name),1),e("span",ol,M(x.cuaa),1)])])]),e("td",sl,M(x.monthDescription),1),e("td",nl,[e("span",il,[K(M(x.nitrogen)+" ",1),t(x.cuaa)?(w(),$("div",rl,dl)):q("",!0)])]),e("td",cl,[e("span",pl,M(x.phosphorus),1)]),e("td",vl,[e("span",fl,M(x.potassium),1)])]))),128))])]),k(fe,{title:"Grafico NPK","is-open":g.value,modalClass:"w-full lg:w-10/12 xl:w-8/12 2xl:w-6/12",onClose:c[2]||(c[2]=x=>g.value=!1),onSubmit:c[3]||(c[3]=x=>g.value=!1),"is-scrollable":"","no-padding":"","hide-footer":""},{footer:A(()=>[k(X,{onClick:c[1]||(c[1]=x=>g.value=!1),isOutlined:!0,"is-secondary":!0},{icon:A(()=>[ml]),default:A(()=>[K("Indietro ")]),_:1})]),default:A(()=>[k(Lt,{npkItems:n.value,yieldItems:V(y),onClose:c[0]||(c[0]=x=>g.value=!1)},null,8,["npkItems","yieldItems"])]),_:1},8,["is-open"])]))}}),xl={class:"w-full"},gl={class:"relative"},hl={class:"bg-gray-100 px-4 py-2.5 text-xs font-semibold text-gray-900"},_l={class:"mt-2 text-sm text-gray-800"},yl={key:1,class:"border-t border-gray-100 px-6 py-14 text-center text-sm sm:px-14"},wl=e("p",{class:"mt-4 font-semibold text-gray-900"},"Nessuna tabella trovata",-1),Il=e("p",{class:"mt-2 text-gray-500"},"Non siamo riusciti a trovare nulla con questo termine. Riprova",-1),Ol=L({__name:"tabSelectionModal",emits:["select"],setup(l,{emit:n}){const y=lt,g=S(""),a=R(()=>g.value===""?y:y.filter(r=>r.name.toLowerCase().includes(g.value.toLowerCase()))),t=R(()=>a.value.reduce((r,p)=>({...r,[p.category]:[...r[p.category]||[],p]}),{}));function s(r){n("select",r)}return(r,p)=>(w(),$("div",xl,[k(V(We),{"onUpdate:modelValue":s},{default:A(()=>[e("div",gl,[k(V(tt),{class:"pointer-events-none absolute left-4 top-3.5 h-5 w-5 text-gray-400","aria-hidden":"true"}),k(V(Xe),{class:"h-12 w-full border-0 bg-transparent pl-11 pr-4 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm",placeholder:"Cerca...",onChange:p[0]||(p[0]=m=>g.value=m.target.value)})]),a.value.length>0?(w(),W(V(Ze),{key:0,static:"",class:"max-h-80 scroll-pb-2 scroll-pt-11 space-y-2 overflow-y-auto pb-2"},{default:A(()=>[(w(!0),$(Y,null,U(Object.entries(t.value),([m,h])=>(w(),$("li",{key:m},[e("h2",hl,M(m),1),e("ul",_l,[(w(!0),$(Y,null,U(h,d=>(w(),W(V(et),{key:d.id,value:d,as:"template"},{default:A(({active:c})=>[e("li",{class:j(["cursor-pointer select-none px-4 py-2 transition-colors",c&&"bg-blue-600 text-text-opposite"])},M(d.name),3)]),_:2},1032,["value"]))),128))])]))),128))]),_:1})):q("",!0),g.value!==""&&a.value.length===0?(w(),$("div",yl,[k(V(Ue),{class:"mx-auto h-6 w-6 text-gray-400","aria-hidden":"true"}),wl,Il])):q("",!0)]),_:1})]))}}),Sl={class:"flex flex-col w-full h-full overflow-hidden"},$l={class:"flex overflow-x-auto pt-4 w-full"},Cl={class:"sm:block w-full"},kl={class:"border-b px-8"},Rl={class:"-mb-px flex justify-between","aria-label":"Tabs"},Tl={class:"flex space-x-8"},Al=["onClick","aria-current"],Pl={class:"flex space-x-8"},Vl=e("i",{class:"fas fa-plus-circle pr-2"},null,-1),Ml=e("span",null,"Aggiungi tab",-1),Dl=[Vl,Ml],Fl={class:"flex flex-col w-full overflow-auto"},Nl=e("i",{class:"fal fa-arrow-left"},null,-1),El=L({__name:"body",setup(l){const n=S(!1),y=S([{id:"yield",name:"Resa",href:"#",current:!0},{id:"water",name:"Bilancio idrico",href:"#",current:!1}]),g=R(()=>y.value.find(t=>t.current));function a(t){const s={id:t.id,name:t.name,current:!1};y.value.find(r=>r.id===t.id)||(n.value=!1,y.value.push(s),g.value.current=!1,s.current=!0)}return(t,s)=>(w(),$("div",Sl,[e("header",null,[e("nav",$l,[e("div",Cl,[e("div",kl,[e("nav",Rl,[e("div",Tl,[(w(!0),$(Y,null,U(y.value,r=>(w(),$("button",{type:"button",key:r.name,onClick:p=>{g.value.current=!1,r.current=!0},class:j([r.current?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700","whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium"]),"aria-current":r.current?"page":void 0},M(r.name),11,Al))),128))]),e("div",Pl,[e("button",{type:"button",onClick:s[0]||(s[0]=r=>n.value=!0),class:j(["border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700","whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium flex items-center"])},Dl)])])])])])]),e("div",Fl,[k(we,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"transform opacity-50","enter-to-class":"transform opacity-100"},{default:A(()=>[g.value.id==="yield"?(w(),W(Ot,{key:0})):g.value.id==="npk"?(w(),W(bl,{key:1})):q("",!0)]),_:1})]),k(fe,{"is-open":n.value,modalClass:"w-full lg:w-10/12 xl:w-8/12 2xl:w-6/12",onClose:s[2]||(s[2]=r=>n.value=!1),onSubmit:s[3]||(s[3]=r=>n.value=!1),"is-scrollable":"","no-padding":"","hide-footer":""},{footer:A(()=>[k(X,{onClick:s[1]||(s[1]=r=>n.value=!1),isOutlined:!0,"is-secondary":!0},{icon:A(()=>[Nl]),default:A(()=>[K("Indietro ")]),_:1})]),default:A(()=>[k(Ol,{onSelect:a})]),_:1},8,["is-open"])]))}}),zl={class:"flex h-full w-full flex-col items-start px-2 sm:px-4 lg:px-8"},Bl={class:"flex w-full space-x-6 pb-8 pt-4 h-full"},aa=L({__name:"index",setup(l){return(n,y)=>(w(),$("div",zl,[e("div",Bl,[k(xe,{title:"Data hub","no-header":"",class:"w-full h-full"},{default:A(()=>[k(El)]),_:1})])]))}});export{aa as default};

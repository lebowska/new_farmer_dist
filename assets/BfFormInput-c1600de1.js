import{d as F,k as w,c as f,o as i,b as o,g as y,f as c,e as I,n as D,B as A,V as P,l as E,m as L}from"./index-47e0eb5e.js";import{r as M}from"./BfFormGroup-f82572ba.js";const R={class:"flex content-center relative"},T={key:0,class:"bf-form-input-prepend rounded-l border border-r-0"},Z={class:"block w-full relative"},x=["id","value","maxlength","disabled","placeholder","autocomplete","aria-describedby"],K=["id","type","maxlength","disabled","placeholder","autocomplete","inputmode","aria-describedby"],z={key:2,class:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none"},j={key:1,class:"bf-form-input-append rounded-r border border-l-0"},q={key:2,class:"bf-form-input-buttons flex flex-none items-center"},O=F({__name:"BfFormInput",props:{modelValue:{},isDisabled:{type:Boolean},isNumeric:{type:Boolean},isPassword:{type:Boolean},isUppercase:{type:Boolean},prepend:{type:Boolean},append:{type:Boolean},buttons:{type:Boolean},textRight:{type:Boolean},removeTrailingZero:{type:Boolean},autocomplete:{},id:{},placeholder:{},maxLength:{},decimals:{},state:{type:[Boolean,null],default:null}},emits:["blur","focus","update:modelValue","change"],setup(t,{emit:u}){let r=w(null),g=w(!1);const a=f({get(){let e=null;return t.modelValue===null||t.modelValue===void 0?e=null:typeof t.modelValue=="string"||!t.isNumeric?e=""+t.modelValue:g.value?e=r.value:typeof t.modelValue=="number"?e=v(t.modelValue):e=t.modelValue+"",e&&t.isUppercase&&(e=e.toUpperCase()),e},set(e){t.isUppercase&&e&&(e=e.toUpperCase()),r.value=e;let l=e;t.isNumeric&&(l=U(l,"en")),u("update:modelValue",l)}});function S(e){typeof e.data<"u"&&(a.value=e.target.value)}function d(e){typeof t.modelValue!="number"?r.value=t.modelValue?t.modelValue+"":"":t.isNumeric&&(r.value=v(t.modelValue)),g.value=e,u(e?"focus":"blur")}function h(e){if(!t.isNumeric)return;let l=!1;e.key?l=(e.key<"0"||e.key>"9")&&e.key!=="."&&e.key!=="Enter"&&e.key!=="-":l=(e.keyCode<48||e.keyCode>57)&&e.keyCode!==190&&e.keyCode!==188&&e.keyCode!==13,l&&(e.preventDefault(),e.stopPropagation())}function v(e){return C(e,t.decimals?t.decimals:-1,!1,"en",t.removeTrailingZero?t.removeTrailingZero:!1)}const m=f(()=>{if(t.isNumeric){const[e,l]=N("en"),n=a.value?.split(l);if(n&&n.length>1)return n[0].length+B(t.decimals)+1}return t.maxLength}),V=f(()=>{let e=`field-${t.id}_message_description`;return t.state===!1&&t.state!==null&&(e+=` field-${t.id}_message_invalid`),t.state===!0&&t.state!==null&&(e+=` field-${t.id}_message_valid`),e}),k=f(()=>({"bf-form-input-invalid":t.state===!1&&t.state!==null,"bf-form-input-valid":t.state===!0&&t.state!==null,"bf-form-input-enabled":!t.isDisabled,"bf-form-input-disabled":t.isDisabled,"bf-form-input-prepended pl-2":t.prepend,"bf-form-input-appended pr-2":t.append||t.buttons,"text-right":t.textRight}));function B(e=-1){return e>=0?e:9}function C(e,l=-1,n=!0,s="en",b=!1){if(!e&&e!==0)return"";const p={useGrouping:n,minimumFractionDigits:l>-1&&!b?l:0,maximumFractionDigits:B(l)};return new Intl.NumberFormat(s,p).format(e)}function U(e,l="en",n=-1){if(!e)return null;const[s,b]=N(l),p=new RegExp(`\\${s}`,"g"),$=e.replace(p,"").replace(b,".");return parseFloat($)}function N(e="en"){const l=C(10000.1,-1,!0,e,!1);let n="";isNaN(parseInt(l.charAt(2)))?n=l.charAt(2):n=l.charAt(1);const s=l.charAt(6);return[n,s]}return(e,l)=>(i(),o("div",R,[e.prepend?(i(),o("div",T,[y(e.$slots,"prepend")])):c("",!0),I("div",Z,[e.isNumeric?(i(),o("input",{key:0,id:e.id,type:"text",value:a.value,onInput:S,maxlength:m.value?m.value:999,disabled:e.isDisabled,placeholder:e.placeholder!=null?e.placeholder:"",autocomplete:e.autocomplete?e.autocomplete:"off",inputmode:"decimal",class:D(["bf-form-input block w-full sm:text-sm border-gray-300 rounded-md bg-bg-100 transition-colors_shadows",k.value]),onFocus:l[0]||(l[0]=n=>d(!0)),onBlur:l[1]||(l[1]=n=>d(!1)),onKeypress:h,onChange:l[2]||(l[2]=n=>e.$emit("change",a.value)),"aria-describedby":V.value},null,42,x)):A((i(),o("input",{key:1,id:e.id,type:e.isPassword?"password":"text","onUpdate:modelValue":l[3]||(l[3]=n=>a.value=n),maxlength:m.value?m.value:999,disabled:e.isDisabled,placeholder:e.placeholder!=null?e.placeholder:"",autocomplete:e.autocomplete?e.autocomplete:"off",inputmode:e.isNumeric?"decimal":"text",class:D(["bf-form-input block w-full sm:text-sm border-gray-300 rounded-md bg-bg-100 transition-colors_shadows",k.value]),onFocus:l[4]||(l[4]=n=>d(!0)),onBlur:l[5]||(l[5]=n=>d(!1)),onKeypress:h,onChange:l[6]||(l[6]=n=>u("change",a.value)),"aria-describedby":V.value},null,42,K)),[[P,a.value]]),e.state===!1&&e.state!==null?(i(),o("div",z,[E(L(M),{class:"h-5 w-5 text-red-500","aria-hidden":"true"})])):c("",!0)]),e.append?(i(),o("div",j,[y(e.$slots,"append")])):c("",!0),e.buttons?(i(),o("div",q,[y(e.$slots,"buttons")])):c("",!0)]))}});export{O as _};

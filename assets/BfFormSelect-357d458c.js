import{o as D,b as C,e as T,d as E,k,c as b,X as L,q as ae,s as A,L as U,z as J,F as _,v as le,x as oe,O as F,y as ne,u as ie,a as Y,w as $,g as Q,f as z,l as M,m as P,n as j,t as W,T as se,r as re,U as ue}from"./index-1e2bbd56.js";import{r as de}from"./BfFormGroup-7e6ac52e.js";import{u as V,F as ve,w as pe,h as ce,o as g,c as fe,l as K,K as be,H,e as me,t as X,b as ge,p as ye,N as Z,O as xe,a as v}from"./use-outside-click-71da6d68.js";import{x as he,a as h,p as Oe,u as Se}from"./use-text-value-da7e282d.js";import{f as we,a as Re}from"./description-c63fabfb.js";import{d as ke,e as Le}from"./CheckCircleIcon-b61598eb.js";function Be(t,p){return D(),C("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[T("path",{"fill-rule":"evenodd",d:"M11.47 4.72a.75.75 0 011.06 0l3.75 3.75a.75.75 0 01-1.06 1.06L12 6.31 8.78 9.53a.75.75 0 01-1.06-1.06l3.75-3.75zm-3.75 9.75a.75.75 0 011.06 0L12 17.69l3.22-3.22a.75.75 0 111.06 1.06l-3.75 3.75a.75.75 0 01-1.06 0l-3.75-3.75a.75.75 0 010-1.06z","clip-rule":"evenodd"})])}function De(t,p){return t===p}var Pe=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Pe||{}),Te=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(Te||{}),Ve=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Ve||{});function Ie(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let ee=Symbol("ListboxContext");function q(t){let p=ne(ee,null);if(p===null){let O=new Error(`<${t} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(O,q),O}return p}let Ce=E({name:"Listbox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>De},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:p,attrs:O,emit:c}){let e=k(1),f=k(null),m=k(null),o=k(null),u=k([]),a=k(""),l=k(null),y=k(1);function S(n=i=>i){let i=l.value!==null?u.value[l.value]:null,s=xe(n(u.value.slice()),x=>g(x.dataRef.domRef)),d=i?s.indexOf(i):null;return d===-1&&(d=null),{options:s,activeOptionIndex:d}}let w=b(()=>t.multiple?1:0),[R,N]=ke(b(()=>t.modelValue===void 0?V(w.value,{[1]:[],[0]:void 0}):t.modelValue),n=>c("update:modelValue",n),b(()=>t.defaultValue)),B={listboxState:e,value:R,mode:w,compare(n,i){if(typeof t.by=="string"){let s=t.by;return n?.[s]===i?.[s]}return t.by(n,i)},orientation:b(()=>t.horizontal?"horizontal":"vertical"),labelRef:f,buttonRef:m,optionsRef:o,disabled:b(()=>t.disabled),options:u,searchQuery:a,activeOptionIndex:l,activationTrigger:y,closeListbox(){t.disabled||e.value!==1&&(e.value=1,l.value=null)},openListbox(){t.disabled||e.value!==0&&(e.value=0)},goToOption(n,i,s){if(t.disabled||e.value===1)return;let d=S(),x=he(n===h.Specific?{focus:h.Specific,id:i}:{focus:n},{resolveItems:()=>d.options,resolveActiveIndex:()=>d.activeOptionIndex,resolveId:I=>I.id,resolveDisabled:I=>I.dataRef.disabled});a.value="",l.value=x,y.value=s??1,u.value=d.options},search(n){if(t.disabled||e.value===1)return;let i=a.value!==""?0:1;a.value+=n.toLowerCase();let s=(l.value!==null?u.value.slice(l.value+i).concat(u.value.slice(0,l.value+i)):u.value).find(x=>x.dataRef.textValue.startsWith(a.value)&&!x.dataRef.disabled),d=s?u.value.indexOf(s):-1;d===-1||d===l.value||(l.value=d,y.value=1)},clearSearch(){t.disabled||e.value!==1&&a.value!==""&&(a.value="")},registerOption(n,i){let s=S(d=>[...d,{id:n,dataRef:i}]);u.value=s.options,l.value=s.activeOptionIndex},unregisterOption(n){let i=S(s=>{let d=s.findIndex(x=>x.id===n);return d!==-1&&s.splice(d,1),s});u.value=i.options,l.value=i.activeOptionIndex,y.value=1},select(n){t.disabled||N(V(w.value,{[0]:()=>n,[1]:()=>{let i=L(B.value.value).slice(),s=L(n),d=i.findIndex(x=>B.compare(s,L(x)));return d===-1?i.push(s):i.splice(d,1),i}}))}};ve([m,o],(n,i)=>{var s;B.closeListbox(),pe(i,ce.Loose)||(n.preventDefault(),(s=g(m))==null||s.focus())},b(()=>e.value===0)),ae(ee,B),fe(b(()=>V(e.value,{[0]:K.Open,[1]:K.Closed})));let r=b(()=>{var n;return(n=g(m))==null?void 0:n.closest("form")});return A(()=>{U([r],()=>{if(!r.value||t.defaultValue===void 0)return;function n(){B.select(t.defaultValue)}return r.value.addEventListener("reset",n),()=>{var i;(i=r.value)==null||i.removeEventListener("reset",n)}},{immediate:!0})}),()=>{let{name:n,modelValue:i,disabled:s,form:d,...x}=t,I={open:e.value===0,disabled:s,value:R.value};return J(_,[...n!=null&&R.value!=null?Le({[n]:R.value}).map(([G,te])=>J(we,be({features:Re.Hidden,key:G,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:d,name:G,value:te}))):[],H({ourProps:{},theirProps:{...O,...me(x,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:I,slots:p,attrs:O,name:"Listbox"})])}}}),Fe=E({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-listbox-button-${X()}`}},setup(t,{attrs:p,slots:O,expose:c}){let e=q("ListboxButton");c({el:e.buttonRef,$el:e.buttonRef});function f(a){switch(a.key){case v.Space:case v.Enter:case v.ArrowDown:a.preventDefault(),e.openListbox(),F(()=>{var l;(l=g(e.optionsRef))==null||l.focus({preventScroll:!0}),e.value.value||e.goToOption(h.First)});break;case v.ArrowUp:a.preventDefault(),e.openListbox(),F(()=>{var l;(l=g(e.optionsRef))==null||l.focus({preventScroll:!0}),e.value.value||e.goToOption(h.Last)});break}}function m(a){switch(a.key){case v.Space:a.preventDefault();break}}function o(a){e.disabled.value||(e.listboxState.value===0?(e.closeListbox(),F(()=>{var l;return(l=g(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})})):(a.preventDefault(),e.openListbox(),Ie(()=>{var l;return(l=g(e.optionsRef))==null?void 0:l.focus({preventScroll:!0})})))}let u=ge(b(()=>({as:t.as,type:p.type})),e.buttonRef);return()=>{var a,l;let y={open:e.listboxState.value===0,disabled:e.disabled.value,value:e.value.value},{id:S,...w}=t,R={ref:e.buttonRef,id:S,type:u.value,"aria-haspopup":"listbox","aria-controls":(a=g(e.optionsRef))==null?void 0:a.id,"aria-expanded":e.disabled.value?void 0:e.listboxState.value===0,"aria-labelledby":e.labelRef.value?[(l=g(e.labelRef))==null?void 0:l.id,S].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:f,onKeyup:m,onClick:o};return H({ourProps:R,theirProps:w,slot:y,attrs:p,slots:O,name:"ListboxButton"})}}}),Ne=E({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-listbox-options-${X()}`}},setup(t,{attrs:p,slots:O,expose:c}){let e=q("ListboxOptions"),f=k(null);c({el:e.optionsRef,$el:e.optionsRef});function m(a){switch(f.value&&clearTimeout(f.value),a.key){case v.Space:if(e.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),e.search(a.key);case v.Enter:if(a.preventDefault(),a.stopPropagation(),e.activeOptionIndex.value!==null){let l=e.options.value[e.activeOptionIndex.value];e.select(l.dataRef.value)}e.mode.value===0&&(e.closeListbox(),F(()=>{var l;return(l=g(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})}));break;case V(e.orientation.value,{vertical:v.ArrowDown,horizontal:v.ArrowRight}):return a.preventDefault(),a.stopPropagation(),e.goToOption(h.Next);case V(e.orientation.value,{vertical:v.ArrowUp,horizontal:v.ArrowLeft}):return a.preventDefault(),a.stopPropagation(),e.goToOption(h.Previous);case v.Home:case v.PageUp:return a.preventDefault(),a.stopPropagation(),e.goToOption(h.First);case v.End:case v.PageDown:return a.preventDefault(),a.stopPropagation(),e.goToOption(h.Last);case v.Escape:a.preventDefault(),a.stopPropagation(),e.closeListbox(),F(()=>{var l;return(l=g(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})});break;case v.Tab:a.preventDefault(),a.stopPropagation();break;default:a.key.length===1&&(e.search(a.key),f.value=setTimeout(()=>e.clearSearch(),350));break}}let o=ye(),u=b(()=>o!==null?(o.value&K.Open)===K.Open:e.listboxState.value===0);return()=>{var a,l,y,S;let w={open:e.listboxState.value===0},{id:R,...N}=t,B={"aria-activedescendant":e.activeOptionIndex.value===null||(a=e.options.value[e.activeOptionIndex.value])==null?void 0:a.id,"aria-multiselectable":e.mode.value===1?!0:void 0,"aria-labelledby":(S=(l=g(e.labelRef))==null?void 0:l.id)!=null?S:(y=g(e.buttonRef))==null?void 0:y.id,"aria-orientation":e.orientation.value,id:R,onKeydown:m,role:"listbox",tabIndex:0,ref:e.optionsRef};return H({ourProps:B,theirProps:N,slot:w,attrs:p,slots:O,features:Z.RenderStrategy|Z.Static,visible:u.value,name:"ListboxOptions"})}}}),Me=E({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-listbox.option-${X()}`}},setup(t,{slots:p,attrs:O,expose:c}){let e=q("ListboxOption"),f=k(null);c({el:f,$el:f});let m=b(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===t.id:!1),o=b(()=>V(e.mode.value,{[0]:()=>e.compare(L(e.value.value),L(t.value)),[1]:()=>L(e.value.value).some(r=>e.compare(L(r),L(t.value)))})),u=b(()=>V(e.mode.value,{[1]:()=>{var r;let n=L(e.value.value);return((r=e.options.value.find(i=>n.some(s=>e.compare(L(s),L(i.dataRef.value)))))==null?void 0:r.id)===t.id},[0]:()=>o.value})),a=Oe(f),l=b(()=>({disabled:t.disabled,value:t.value,get textValue(){return a()},domRef:f}));A(()=>e.registerOption(t.id,l)),le(()=>e.unregisterOption(t.id)),A(()=>{U([e.listboxState,o],()=>{e.listboxState.value===0&&o.value&&V(e.mode.value,{[1]:()=>{u.value&&e.goToOption(h.Specific,t.id)},[0]:()=>{e.goToOption(h.Specific,t.id)}})},{immediate:!0})}),oe(()=>{e.listboxState.value===0&&m.value&&e.activationTrigger.value!==0&&F(()=>{var r,n;return(n=(r=g(f))==null?void 0:r.scrollIntoView)==null?void 0:n.call(r,{block:"nearest"})})});function y(r){if(t.disabled)return r.preventDefault();e.select(t.value),e.mode.value===0&&(e.closeListbox(),F(()=>{var n;return(n=g(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})}))}function S(){if(t.disabled)return e.goToOption(h.Nothing);e.goToOption(h.Specific,t.id)}let w=Se();function R(r){w.update(r)}function N(r){w.wasMoved(r)&&(t.disabled||m.value||e.goToOption(h.Specific,t.id,0))}function B(r){w.wasMoved(r)&&(t.disabled||m.value&&e.goToOption(h.Nothing))}return()=>{let{disabled:r}=t,n={active:m.value,selected:o.value,disabled:r},{id:i,value:s,disabled:d,...x}=t,I={id:i,ref:f,role:"option",tabIndex:r===!0?void 0:-1,"aria-disabled":r===!0?!0:void 0,"aria-selected":o.value,disabled:void 0,onClick:y,onFocus:S,onPointerenter:R,onMouseenter:R,onPointermove:N,onMousemove:N,onPointerleave:B,onMouseleave:B};return H({ourProps:I,theirProps:x,slot:n,attrs:O,slots:p,name:"ListboxOption"})}}});const $e={class:"relative"},ze={class:"flex w-full relative"},Ee={key:0,class:"bf-form-select-prepend rounded-l border border-r-0"},je={class:"block truncate"},Ae={key:0,class:"absolute inset-y-0 right-4 pr-3 flex items-center pointer-events-none"},Ue={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Ke={class:"sr-only"},He={key:1,class:"bf-form-select-append rounded-r border border-l-0"},qe={key:2,class:"bf-form-select-buttons flex flex-none items-center"},Ze=E({__name:"BfFormSelect",props:{modelValue:{type:[String,Number,Boolean,null]},isDisabled:{type:Boolean},prepend:{type:Boolean},append:{type:Boolean},buttons:{type:Boolean},items:{},autocomplete:{},id:{},placeholder:{},state:{type:[Boolean,null],default:null}},emits:["blur","focus","update:modelValue","change"],setup(t,{emit:p}){const{t:O}=ie(),c=k(void 0);A(()=>{e(t.modelValue)}),U(()=>t.modelValue,(o,u)=>{e(o)}),U(()=>c.value,(o,u)=>{p("update:modelValue",o?o.id:void 0)});function e(o){if(t.items&&t.items.length>0&&(o||o===0)){const u=t.items.find(a=>a.id===o);u?c.value=u:c.value=void 0}else c.value=void 0}const f=b(()=>{let o=`field-${t.id}_message_description`;return t.state===!1&&t.state!==null&&(o+=` field-${t.id}_message_invalid`),t.state===!0&&t.state!==null&&(o+=` field-${t.id}_message_valid`),o}),m=b(()=>({"bf-form-select-invalid":t.state===!1&&t.state!==null,"bf-form-select-valid":t.state===!0&&t.state!==null,"bf-form-select-enabled":!t.isDisabled,"bf-form-select-disabled":t.isDisabled,"bf-form-select-prepended pl-2":t.prepend,"bf-form-select-appended pr-2":t.append||t.buttons}));return(o,u)=>(D(),Y(P(Ce),{as:"div",modelValue:c.value,"onUpdate:modelValue":u[0]||(u[0]=a=>c.value=a),disabled:o.isDisabled,id:o.id,"aria-describedby":f.value,nullable:""},{default:$(()=>[T("div",$e,[T("div",ze,[o.prepend?(D(),C("div",Ee,[Q(o.$slots,"prepend")])):z("",!0),M(P(Fe),{class:j(["bf-form-select",m.value])},{default:$(()=>[T("span",je,W(c.value?c.value.label:o.placeholder!=null?o.placeholder:""),1),o.state===!1&&o.state!==null?(D(),C("div",Ae,[M(P(de),{class:"h-5 w-5 text-red-500","aria-hidden":"true"})])):z("",!0),T("span",Ue,[T("span",Ke,W(P(O)("show-list")),1),M(P(Be),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])]),_:1},8,["class"]),o.append?(D(),C("div",He,[Q(o.$slots,"append")])):z("",!0),o.buttons?(D(),C("div",qe,[Q(o.$slots,"buttons")])):z("",!0)]),M(se,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:$(()=>[M(P(Ne),{class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-bg-100 py-1 text-base shadow-lg ring-1 ring-bg-900 ring-opacity-5 focus:outline-none sm:text-sm"},{default:$(()=>[(D(!0),C(_,null,re(o.items,a=>(D(),Y(P(Me),{as:"template",key:a.id,value:a},{default:$(({active:l,selected:y})=>[T("li",{class:j([l?"bg-blue-600 text-text-opposite":"text-gray-900","relative cursor-default select-none py-2 pl-3 pr-9"])},[T("span",{class:j([y?"font-semibold":"font-normal","block truncate"])},W(a.label),3),y?(D(),C("span",{key:0,class:j([l?"text-text-opposite":"text-blue-600","absolute inset-y-0 right-0 flex items-center pr-4"])},[M(P(ue),{class:"h-5 w-5","aria-hidden":"true"})],2)):z("",!0)],2)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:3},8,["modelValue","disabled","id","aria-describedby"]))}});export{Ce as F,Me as H,Fe as K,Ne as N,Ze as _,Be as r};

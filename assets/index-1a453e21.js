import{_ as ge}from"./MainTile-3b482f13.js";import{o as w,b as S,e,d as L,k as O,c as k,X as A,q as he,s as J,L as W,z as ie,F as Y,x as oe,v as _e,O as fe,y as ye,r as U,n as K,t as M,f as q,D as H,m as P,H as me,C as we,l as $,w as T,p as re,a as X,T as Ce}from"./index-fa2db9d6.js";import{r as Ie,n as Oe,_ as ve}from"./BfModal-8ebdccb6.js";import{_ as Z}from"./BfButton-539b9149.js";import{a as Se,b as ue,u as $e,d as de,e as ce,_ as ke}from"./BfFormGroup-4968013d.js";import{_ as pe}from"./BfFormSelect-8b600ea4.js";import{g as Q}from"./Colors-74604422.js";import{t as Re,_ as Te}from"./ChartComponent-7f59dc61.js";import{d as Ae,e as Pe,r as Ve}from"./CheckCircleIcon-ad12303f.js";import{k as Me,E as De,w as Fe}from"./radio-group-24a4308b.js";import{u as j,o as z,F as Ee,c as Ne,l as ee,K as ze,H as le,e as be,t as ne,N as te,p as Be,O as Le,a as B}from"./use-outside-click-21f3f43a.js";import{x as He,a as E,u as je}from"./use-text-value-05efac81.js";import{p as Ke}from"./use-tree-walker-7cc814eb.js";import{f as Ye,a as Ue}from"./description-193f2d1a.js";import"./use-root-containers-634c088c.js";import"./micro-task-89dcd6af.js";import"./plugin-vue_export-helper-c27b6911.js";function qe(l,r){return w(),S("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.182 16.318A4.486 4.486 0 0012.016 15a4.486 4.486 0 00-3.198 1.318M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z"})])}function Ge(l,r){return l===r}var Je=(l=>(l[l.Open=0]="Open",l[l.Closed=1]="Closed",l))(Je||{}),Qe=(l=>(l[l.Single=0]="Single",l[l.Multi=1]="Multi",l))(Qe||{}),We=(l=>(l[l.Pointer=0]="Pointer",l[l.Other=1]="Other",l))(We||{});let xe=Symbol("ComboboxContext");function ae(l){let r=ye(xe,null);if(r===null){let _=new Error(`<${l} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(_,ae),_}return r}let Xe=L({name:"Combobox",emits:{"update:modelValue":l=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Ge},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(l,{slots:r,attrs:_,emit:g}){let a=O(1),t=O(null),s=O(null),d=O(null),f=O(null),b=O({static:!1,hold:!1}),h=O([]),c=O(null),p=O(1),x=O(!1);function V(n=m=>m){let m=c.value!==null?h.value[c.value]:null,v=Le(n(h.value.slice()),I=>z(I.dataRef.domRef)),u=m?v.indexOf(m):null;return u===-1&&(u=null),{options:v,activeOptionIndex:u}}let F=k(()=>l.multiple?1:0),o=k(()=>l.nullable),[C,y]=Ae(k(()=>l.modelValue===void 0?j(F.value,{[1]:[],[0]:void 0}):l.modelValue),n=>g("update:modelValue",n),k(()=>l.defaultValue)),i={comboboxState:a,value:C,mode:F,compare(n,m){if(typeof l.by=="string"){let v=l.by;return n?.[v]===m?.[v]}return l.by(n,m)},defaultValue:k(()=>l.defaultValue),nullable:o,inputRef:s,labelRef:t,buttonRef:d,optionsRef:f,disabled:k(()=>l.disabled),options:h,change(n){y(n)},activeOptionIndex:k(()=>{if(x.value&&c.value===null&&h.value.length>0){let n=h.value.findIndex(m=>!m.dataRef.disabled);n!==-1&&(c.value=n)}return c.value}),activationTrigger:p,optionsPropsRef:b,closeCombobox(){x.value=!1,!l.disabled&&a.value!==1&&(a.value=1,c.value=null)},openCombobox(){if(x.value=!0,l.disabled||a.value===0)return;let n=h.value.findIndex(m=>{let v=A(m.dataRef.value);return j(F.value,{[0]:()=>i.compare(A(i.value.value),A(v)),[1]:()=>A(i.value.value).some(u=>i.compare(A(u),A(v)))})});n!==-1&&(c.value=n),a.value=0},goToOption(n,m,v){if(x.value=!1,l.disabled||f.value&&!b.value.static&&a.value===1)return;let u=V();if(u.activeOptionIndex===null){let R=u.options.findIndex(G=>!G.dataRef.disabled);R!==-1&&(u.activeOptionIndex=R)}let I=He(n===E.Specific?{focus:E.Specific,id:m}:{focus:n},{resolveItems:()=>u.options,resolveActiveIndex:()=>u.activeOptionIndex,resolveId:R=>R.id,resolveDisabled:R=>R.dataRef.disabled});c.value=I,p.value=v??1,h.value=u.options},selectOption(n){let m=h.value.find(u=>u.id===n);if(!m)return;let{dataRef:v}=m;y(j(F.value,{[0]:()=>v.value,[1]:()=>{let u=A(i.value.value).slice(),I=A(v.value),R=u.findIndex(G=>i.compare(I,A(G)));return R===-1?u.push(I):u.splice(R,1),u}}))},selectActiveOption(){if(i.activeOptionIndex.value===null)return;let{dataRef:n,id:m}=h.value[i.activeOptionIndex.value];y(j(F.value,{[0]:()=>n.value,[1]:()=>{let v=A(i.value.value).slice(),u=A(n.value),I=v.findIndex(R=>i.compare(u,A(R)));return I===-1?v.push(u):v.splice(I,1),v}})),i.goToOption(E.Specific,m)},registerOption(n,m){let v={id:n,dataRef:m},u=V(I=>[...I,v]);if(c.value===null){let I=m.value.value;j(F.value,{[0]:()=>i.compare(A(i.value.value),A(I)),[1]:()=>A(i.value.value).some(R=>i.compare(A(R),A(I)))})&&(u.activeOptionIndex=u.options.indexOf(v))}h.value=u.options,c.value=u.activeOptionIndex,p.value=1,u.options.some(I=>!z(I.dataRef.domRef))&&requestAnimationFrame(()=>{let I=V();h.value=I.options,c.value=I.activeOptionIndex})},unregisterOption(n){var m;i.activeOptionIndex.value!==null&&((m=i.options.value[i.activeOptionIndex.value])==null?void 0:m.id)===n&&(x.value=!0);let v=V(u=>{let I=u.findIndex(R=>R.id===n);return I!==-1&&u.splice(I,1),u});h.value=v.options,c.value=v.activeOptionIndex,p.value=1}};Ee([s,d,f],()=>i.closeCombobox(),k(()=>a.value===0)),he(xe,i),Ne(k(()=>j(a.value,{[0]:ee.Open,[1]:ee.Closed})));let D=k(()=>i.activeOptionIndex.value===null?null:h.value[i.activeOptionIndex.value].dataRef.value),N=k(()=>{var n;return(n=z(s))==null?void 0:n.closest("form")});return J(()=>{W([N],()=>{if(!N.value||l.defaultValue===void 0)return;function n(){i.change(l.defaultValue)}return N.value.addEventListener("reset",n),()=>{var m;(m=N.value)==null||m.removeEventListener("reset",n)}},{immediate:!0})}),()=>{let{name:n,disabled:m,form:v,...u}=l,I={open:a.value===0,disabled:m,activeIndex:i.activeOptionIndex.value,activeOption:D.value,value:C.value};return ie(Y,[...n!=null&&C.value!=null?Pe({[n]:C.value}).map(([R,G])=>ie(Ye,ze({features:Ue.Hidden,key:R,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:v,name:R,value:G}))):[],le({theirProps:{..._,...be(u,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:I,slots:r,attrs:_,name:"Combobox"})])}}}),Ze=L({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:()=>`headlessui-combobox-input-${ne()}`}},emits:{change:l=>!0},setup(l,{emit:r,attrs:_,slots:g,expose:a}){let t=ae("ComboboxInput"),s={value:!1};a({el:t.inputRef,$el:t.inputRef});let d=k(()=>{var o;let C=t.value.value;return z(t.inputRef)?typeof l.displayValue<"u"&&C!==void 0?(o=l.displayValue(C))!=null?o:"":typeof C=="string"?C:"":""});J(()=>{W([d,t.comboboxState],([o,C],[y,i])=>{if(s.value)return;let D=z(t.inputRef);D&&(i===0&&C===1||o!==y)&&(D.value=o)},{immediate:!0}),W([t.comboboxState],([o],[C])=>{if(o===0&&C===1){let y=z(t.inputRef);if(!y)return;let i=y.value,{selectionStart:D,selectionEnd:N,selectionDirection:n}=y;y.value="",y.value=i,n!==null?y.setSelectionRange(D,N,n):y.setSelectionRange(D,N)}})});let f=O(!1),b=O(null);function h(){f.value=!0}function c(){Ie().nextFrame(()=>{f.value=!1,b.value&&(t.openCombobox(),r("change",b.value),b.value=null)})}function p(o){switch(s.value=!0,o.key){case B.Backspace:case B.Delete:if(t.mode.value!==0||!t.nullable.value)return;let C=o.currentTarget;requestAnimationFrame(()=>{if(C.value===""){t.change(null);let y=z(t.optionsRef);y&&(y.scrollTop=0),t.goToOption(E.Nothing)}});break;case B.Enter:if(s.value=!1,t.comboboxState.value!==0||f.value)return;if(o.preventDefault(),o.stopPropagation(),t.activeOptionIndex.value===null){t.closeCombobox();return}t.selectActiveOption(),t.mode.value===0&&t.closeCombobox();break;case B.ArrowDown:return s.value=!1,o.preventDefault(),o.stopPropagation(),j(t.comboboxState.value,{[0]:()=>t.goToOption(E.Next),[1]:()=>t.openCombobox()});case B.ArrowUp:return s.value=!1,o.preventDefault(),o.stopPropagation(),j(t.comboboxState.value,{[0]:()=>t.goToOption(E.Previous),[1]:()=>{t.openCombobox(),fe(()=>{t.value.value||t.goToOption(E.Last)})}});case B.Home:if(o.shiftKey)break;return s.value=!1,o.preventDefault(),o.stopPropagation(),t.goToOption(E.First);case B.PageUp:return s.value=!1,o.preventDefault(),o.stopPropagation(),t.goToOption(E.First);case B.End:if(o.shiftKey)break;return s.value=!1,o.preventDefault(),o.stopPropagation(),t.goToOption(E.Last);case B.PageDown:return s.value=!1,o.preventDefault(),o.stopPropagation(),t.goToOption(E.Last);case B.Escape:if(s.value=!1,t.comboboxState.value!==0)return;o.preventDefault(),t.optionsRef.value&&!t.optionsPropsRef.value.static&&o.stopPropagation(),t.closeCombobox();break;case B.Tab:if(s.value=!1,t.comboboxState.value!==0)return;t.mode.value===0&&t.selectActiveOption(),t.closeCombobox();break}}function x(o){if(f.value){b.value=o;return}t.openCombobox(),r("change",o)}function V(){s.value=!1}let F=k(()=>{var o,C,y,i;return(i=(y=(C=l.defaultValue)!=null?C:t.defaultValue.value!==void 0?(o=l.displayValue)==null?void 0:o.call(l,t.defaultValue.value):null)!=null?y:t.defaultValue.value)!=null?i:""});return()=>{var o,C,y,i,D,N;let n={open:t.comboboxState.value===0},{id:m,displayValue:v,onChange:u,...I}=l,R={"aria-controls":(o=t.optionsRef.value)==null?void 0:o.id,"aria-expanded":t.disabled.value?void 0:t.comboboxState.value===0,"aria-activedescendant":t.activeOptionIndex.value===null||(C=t.options.value[t.activeOptionIndex.value])==null?void 0:C.id,"aria-labelledby":(D=(y=z(t.labelRef))==null?void 0:y.id)!=null?D:(i=z(t.buttonRef))==null?void 0:i.id,"aria-autocomplete":"list",id:m,onCompositionstart:h,onCompositionend:c,onKeydown:p,onInput:x,onBlur:V,role:"combobox",type:(N=_.type)!=null?N:"text",tabIndex:0,ref:t.inputRef,defaultValue:F.value,disabled:t.disabled.value===!0?!0:void 0};return le({ourProps:R,theirProps:I,slot:n,attrs:_,slots:g,features:te.RenderStrategy|te.Static,name:"ComboboxInput"})}}}),et=L({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(l,{attrs:r,slots:_,expose:g}){let a=ae("ComboboxOptions"),t=`headlessui-combobox-options-${ne()}`;g({el:a.optionsRef,$el:a.optionsRef}),oe(()=>{a.optionsPropsRef.value.static=l.static}),oe(()=>{a.optionsPropsRef.value.hold=l.hold});let s=Be(),d=k(()=>s!==null?(s.value&ee.Open)===ee.Open:a.comboboxState.value===0);return Ke({container:k(()=>z(a.optionsRef)),enabled:k(()=>a.comboboxState.value===0),accept(f){return f.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:f.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(f){f.setAttribute("role","none")}}),()=>{var f,b,h;let c={open:a.comboboxState.value===0},p={"aria-labelledby":(h=(f=z(a.labelRef))==null?void 0:f.id)!=null?h:(b=z(a.buttonRef))==null?void 0:b.id,id:t,ref:a.optionsRef,role:"listbox","aria-multiselectable":a.mode.value===1?!0:void 0},x=be(l,["hold"]);return le({ourProps:p,theirProps:x,slot:c,attrs:r,slots:_,features:te.RenderStrategy|te.Static,visible:d.value,name:"ComboboxOptions"})}}}),tt=L({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(l,{slots:r,attrs:_,expose:g}){let a=ae("ComboboxOption"),t=`headlessui-combobox-option-${ne()}`,s=O(null);g({el:s,$el:s});let d=k(()=>a.activeOptionIndex.value!==null?a.options.value[a.activeOptionIndex.value].id===t:!1),f=k(()=>j(a.mode.value,{[0]:()=>a.compare(A(a.value.value),A(l.value)),[1]:()=>A(a.value.value).some(o=>a.compare(A(o),A(l.value)))})),b=k(()=>({disabled:l.disabled,value:l.value,domRef:s}));J(()=>a.registerOption(t,b)),_e(()=>a.unregisterOption(t)),oe(()=>{a.comboboxState.value===0&&d.value&&a.activationTrigger.value!==0&&fe(()=>{var o,C;return(C=(o=z(s))==null?void 0:o.scrollIntoView)==null?void 0:C.call(o,{block:"nearest"})})});function h(o){if(l.disabled)return o.preventDefault();a.selectOption(t),a.mode.value===0&&a.closeCombobox(),Oe()||requestAnimationFrame(()=>{var C;return(C=z(a.inputRef))==null?void 0:C.focus()})}function c(){if(l.disabled)return a.goToOption(E.Nothing);a.goToOption(E.Specific,t)}let p=je();function x(o){p.update(o)}function V(o){p.wasMoved(o)&&(l.disabled||d.value||a.goToOption(E.Specific,t,0))}function F(o){p.wasMoved(o)&&(l.disabled||d.value&&(a.optionsPropsRef.value.hold||a.goToOption(E.Nothing)))}return()=>{let{disabled:o}=l,C={active:d.value,selected:f.value,disabled:o},y={id:t,ref:s,role:"option",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,"aria-selected":f.value,disabled:void 0,onClick:h,onFocus:c,onPointerenter:x,onMouseenter:x,onPointermove:V,onMousemove:V,onPointerleave:F,onMouseleave:F};return le({ourProps:y,theirProps:l,slot:C,attrs:_,slots:r,name:"ComboboxOption"})}}});function lt(l,r){return w(),S("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z","clip-rule":"evenodd"})])}const se=[{name:"Pomi d'oro & Co.",cuaa:"RLALWR34J23K934",totalYield:"56.2",unit:"ton",yieldPerHa:"1.8",isInDanger:!1},{name:"Pomodorini e pomodoroni",cuaa:"KRJAVA00H00M834",totalYield:"89.3",unit:"ton",yieldPerHa:"2.3",isInDanger:!1},{name:"La pummarola snc",cuaa:"JMKMB03NM83O345",totalYield:"75.3",unit:"ton",yieldPerHa:"0.8",isInDanger:!0},{name:"Tom Ato",cuaa:"QRQTBH74U73Q834",totalYield:"36.8",unit:"ton",yieldPerHa:"2.8",isInDanger:!1}],at=[{id:"yield",name:"Resa",category:"Azienda"},{id:"water",name:"Bilancio idrico",category:"Monitoraggio"},{id:"npk",name:"NPK",category:"Monitoraggio"}],ot={class:"flex flex-col w-full h-full"},st=me('<div class="flex flex-col items-start justify-between gap-x-8 gap-y-4 bg-gray-50 px-4 py-4 sm:flex-row sm:items-center sm:px-6 lg:px-8 -mt-px"><div><div class="flex items-center gap-x-3"><h1 class="flex gap-x-3 text-base leading-7"><span class="font-semibold text-text">Azienda</span><span class="text-gray-600">/</span><span class="font-semibold text-text">Resa</span></h1></div><p class="mt-2 text-xs leading-6 text-gray-500">Compara le rese delle tue aziende</p></div><div class="flex space-x-2"><button type="button" class="cursor-pointer order-first flex-none rounded-full bg-blue-400/10 hover:bg-blue-400/20 px-2 py-1 text-xs font-medium text-blue-400 ring-1 ring-inset ring-blue-400/30 sm:order-none"><i class="fas fa-chart-simple pr-2"></i> Crea grafico </button><button type="button" class="cursor-pointer order-first flex-none rounded-full bg-blue-400/10 hover:bg-blue-400/20 px-2 py-1 text-xs font-medium text-blue-400 ring-1 ring-inset ring-blue-400/30 sm:order-none"><i class="fas fa-arrow-down-to-line pr-2"></i> Esporta </button><button type="button" class="cursor-pointer order-first flex-none rounded-full bg-blue-400/10 hover:bg-blue-400/20 px-2 py-1 text-xs font-medium text-blue-400 ring-1 ring-inset ring-blue-400/30 sm:order-none"><i class="fas fa-arrows-rotate pr-2"></i> Aggiorna </button></div></div>',1),nt={class:"grid grid-cols-1 bg-gray-50 sm:grid-cols-2 lg:grid-cols-4 border-b"},it={class:"text-sm font-medium leading-6 text-gray-500"},rt={class:"mt-2 flex items-baseline gap-x-2"},ut={class:"text-3xl font-medium tracking-tight text-text"},dt={key:0,class:"text-sm text-gray-500"},ct={class:"mt-10 w-full whitespace-nowrap text-left"},pt=e("colgroup",null,[e("col",{class:"w-full sm:w-4/12"}),e("col",{class:"lg:w-4/12"}),e("col",{class:"lg:w-2/12"}),e("col",{class:"lg:w-1/12"}),e("col",{class:"lg:w-1/12"})],-1),ft=e("thead",{class:"border-b text-sm leading-6 text-text"},[e("tr",null,[e("th",{scope:"col",class:"py-2 pl-4 pr-8 font-semibold sm:pl-6 lg:pl-8"},"Azienda"),e("th",{scope:"col",class:"hidden py-2 pl-0 pr-8 font-semibold sm:table-cell"},"Resa totale"),e("th",{scope:"col",class:"py-2 pl-0 pr-4 text-right font-semibold sm:pr-8 sm:text-left lg:pr-20"}," Resa per ettaro ")])],-1),mt={class:"divide-y divide-border"},vt={class:"py-4 pl-4 pr-8 sm:pl-6 lg:pl-8"},bt={class:"flex items-center gap-x-4"},xt={class:"truncate text-sm font-medium leading-6 text-text"},gt={class:"text-gray-400 pl-2"},ht={class:"hidden py-4 pl-0 pr-8 text-sm leading-6 md:table-cell lg:pr-20"},_t={class:"hidden py-4 pl-0 pr-8 text-sm leading-6 md:table-cell lg:pr-20"},yt={class:"flex items-center"},wt={key:0,class:"flex-none rounded-full bg-red-400/10 p-1 ml-2"},Ct=e("div",{class:"h-2 w-2 rounded-full bg-red-400"},null,-1),It=[Ct],Ot=L({__name:"yieldTab",setup(l){const r=se,_=r.reduce((d,f)=>d+parseFloat(f.totalYield),0),g=r.reduce((d,f)=>d+parseFloat(f.yieldPerHa),0),a=_/r.length,t=g/r.length,s=[{name:"Aziende totali",value:r.length.toString(),unit:""},{name:"Resa totale",value:_.toFixed(1),unit:"ton"},{name:"Rendimento medio per az.",value:a.toFixed(1),unit:"ton"},{name:"Rendimento medio per ha",value:t.toFixed(1),unit:"ton"}];return(d,f)=>(w(),S("div",ot,[st,e("div",nt,[(w(),S(Y,null,U(s,(b,h)=>e("div",{key:b.name,class:K([h%2===1?"sm:border-l":h===2?"lg:border-l":"","border-t py-6 px-4 sm:px-6 lg:px-8"])},[e("p",it,M(b.name),1),e("p",rt,[e("span",ut,M(b.value),1),b.unit?(w(),S("span",dt,M(b.unit),1)):q("",!0)])],2)),64))]),e("table",ct,[pt,ft,e("tbody",mt,[(w(!0),S(Y,null,U(P(r),(b,h)=>(w(),S("tr",{key:h},[e("td",vt,[e("div",bt,[e("div",xt,[e("span",null,M(b.name),1),e("span",gt,M(b.cuaa),1)])])]),e("td",ht,M(b.totalYield+" "+b.unit),1),e("td",_t,[e("span",yt,[H(M(b.yieldPerHa+" "+b.unit)+" ",1),b.isInDanger?(w(),S("div",wt,It)):q("",!0)])])]))),128))])])]))}}),St={class:"relative flex h-full w-full pb-4 pt-4"},$t=L({__name:"npkChart",props:{npkItems:{},yieldItems:{}},emits:["close"],setup(l,{emit:r}){const _=we(),g=O(!1);let a=!1;const t=O(0),s=O(null);O([]),O([]),Re.color;let d=[],f=[];J(async()=>{l.npkItems.length>0&&l.yieldItems.length>0?b():a=!0}),W(()=>_.darkMode,async()=>{b(!0)});function b(c=!1){if(l.npkItems.length===0||l.yieldItems.length===0){a=!0;return}f=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],d=[];const p=[],x=[];l.yieldItems.forEach(i=>{p.findIndex(D=>D.id===i.cuaa)===-1&&p.push({id:i.cuaa,name:i.name})});const V=Q("teal-400"),F=Q("blue-400"),o=Q("red-400"),C=Q("yellow-400"),y=[V,F,o,C];p.forEach((i,D)=>{const N={id:"line_"+i.id,name:i.name,smooth:!1,lineStyle:{width:2},color:y[D],symbolSize:6,type:"line",data:l.npkItems.filter(n=>n.cuaa===i.id).map(n=>n.nitrogen)};x.push(N)}),d.push(...x),h(),c&&t.value++}function h(){s.value={grid:{top:40,right:20,left:20,bottom:20,containLabel:!0},tooltip:{trigger:"axis",confine:!0},legend:{show:!0},xAxis:{type:"category",data:f},yAxis:[{type:"value",name:"",position:"left"}],series:d,textStyle:{fontFamily:"Work Sans"}}}return(c,p)=>(w(),S("div",St,[$(Te,{options:s.value,loading:g.value,"no-data":P(a),"disable-theme-refresh":!0,rebuild:t.value},null,8,["options","loading","no-data","rebuild"])]))}}),kt={class:"w-full h-full px-4 pt-4"},Rt={key:0},Tt=e("div",{class:"mx-2 pt-4 pb-4"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Tipologia")],-1),At={class:"px-2"},Pt={class:"w-full flex space-x-3"},Vt={class:"flex"},Mt={class:"flex flex-1"},Dt={class:"flex flex-col"},Ft={class:"flex w-full h-full items-center justify-center pt-2 text-gray-400",style:{"font-size":"1.3rem"}},Et=e("div",{class:"mx-2 pt-4 pb-4"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"},"Riempimento")],-1),Nt={class:"pt-4 px-2"},zt=e("i",{class:"fa-light fa-chart-simple"},null,-1),Bt=e("i",{class:"fa-light fa-arrow-turn-down-left"},null,-1),Lt={key:1,class:"w-full h-full"},Ht=L({__name:"chartCreationModal",props:{npkItems:{},yieldItems:{}},emits:["close"],setup(l,{emit:r}){const _=O(!1),g=O(!1),a=O(!1),t=O(!1),s=O(""),d=[{id:"bar",icon:"fa-light fa-chart-simple",label:"Barre"},{id:"line",icon:"fa-light fa-chart-line",label:"Linee"},{id:"pie",icon:"fa-light fa-chart-pie",label:"Torta"},{id:"radar",icon:"fa-light fa-chart-radar",label:"Radar"}],f=[{id:"month",label:"Mese"}],b=[{id:"n",label:"Azoto"},{id:"p",label:"Potassio"},{id:"k",label:"Fosforo"}],h=O("");function c(m){h.value=m}const p={xAxisType:"",yAxisType:""},x=Se({xAxisType:ue().nullable(!0).required(),yAxisType:ue().nullable(!0).required()}),{handleSubmit:V,resetForm:F,setValues:o,setFieldValue:C,errors:y}=$e({initialValues:p,validationSchema:x}),{value:i}=de("xAxisType"),{value:D}=de("yAxisType"),N=V(async m=>{g.value=!0,a.value=!1,_.value=!1;try{await new Promise(v=>setTimeout(v,2e3)),g.value=!1,_.value=!0,t.value=!0}catch(v){a.value=!0,s.value=v.message,g.value=!1}});function n(m){F()}return(m,v)=>(w(),S("div",kt,[t.value?(w(),S("div",Lt,[$($t,{npkItems:m.npkItems,yieldItems:m.yieldItems},null,8,["npkItems","yieldItems"])])):(w(),S("div",Rt,[$(ke,{onSubmit:P(N),onReset:n,ref:"form"},{default:T(()=>[Tt,e("div",At,[$(P(Me),{"model-value":h.value,"onUpdate:modelValue":c},{default:T(()=>[e("div",Pt,[(w(),S(Y,null,U(d,u=>$(P(De),{as:"template",key:u.id,value:u.id},{default:T(({checked:I,active:R})=>[e("div",{class:K([I?"border-transparent":"",R?"border-blue-600 ring-4 ring-blue-100 ring-offset-0":"","relative flex-grow flex flex-col w-6/12 cursor-pointer rounded-lg border bg-bg-100 p-4 focus:outline-none transition-colors-default hover:bg-blue-50 h-24"])},[e("div",Vt,[e("div",Mt,[e("div",Dt,[$(P(Fe),{as:"span",class:"block text-sm font-medium text-gray-900"},{default:T(()=>[H(M(u.label),1)]),_:2},1024)])]),$(P(Ve),{class:K([I?"":"invisible","h-5 w-5 text-blue-600"]),"aria-hidden":"true"},null,8,["class"]),e("span",{class:K([I?"border-blue-600":"border-transparent","border-2","pointer-events-none absolute -inset-px rounded-lg"]),"aria-hidden":"true"},null,2)]),e("div",Ft,[e("i",{class:K(u.icon),"aria-hidden":"true"},null,2)])],2)]),_:2},1032,["value"])),64))])]),_:1},8,["model-value"])]),Et,$(ce,{"for-id":"ccm-1",label:"Asse x",state:P(y).xAxisType?!1:null,"invalid-message":P(y).xAxisType},{default:T(()=>[$(pe,{id:"nfi-1",modelValue:P(i),"onUpdate:modelValue":v[0]||(v[0]=u=>re(i)?i.value=u:null),items:f,state:P(y).xAxisType?!1:null},null,8,["modelValue","state"])]),_:1},8,["state","invalid-message"]),$(ce,{"for-id":"ccm-2",label:"Asse y",state:P(y).yAxisType?!1:null,"invalid-message":P(y).yAxisType},{default:T(()=>[$(pe,{id:"nfi-1",modelValue:P(D),"onUpdate:modelValue":v[1]||(v[1]=u=>re(D)?D.value=u:null),items:b,state:P(y).yAxisType?!1:null},null,8,["modelValue","state"])]),_:1},8,["state","invalid-message"]),e("div",Nt,[$(Z,{"is-submit":"","is-loading":g.value,disabled:g.value,"is-success":"",class:"mr-2"},{icon:T(()=>[zt]),default:T(()=>[H(" Crea grafico ")]),_:1},8,["is-loading","disabled"]),$(Z,{onClick:v[2]||(v[2]=u=>r("close")),disabled:g.value,"is-outlined":"","is-secondary":""},{icon:T(()=>[Bt]),default:T(()=>[H(" Indietro ")]),_:1},8,["disabled"])])]),_:1},8,["onSubmit"])]))]))}}),jt={class:"flex flex-col w-full h-full"},Kt=me('<div><div class="flex items-center gap-x-3"><h1 class="flex gap-x-3 text-base leading-7"><span class="font-semibold text-text">Monitoraggio</span><span class="text-gray-600">/</span><span class="font-semibold text-text">NPK</span></h1></div><p class="mt-2 text-xs leading-6 text-gray-500">Analizza i valori NPK nel tempo</p></div>',1),Yt=e("i",{class:"fas fa-chart-simple pr-2"},null,-1),Ut=e("button",{type:"button",class:"cursor-pointer order-first flex-none rounded-full bg-blue-400/10 hover:bg-blue-400/20 px-2 py-1 text-xs font-medium text-blue-400 ring-1 ring-inset ring-blue-400/30 sm:order-none"},[e("i",{class:"fas fa-arrow-down-to-line pr-2"}),H(" Esporta ")],-1),qt=e("button",{type:"button",class:"cursor-pointer order-first flex-none rounded-full bg-blue-400/10 hover:bg-blue-400/20 px-2 py-1 text-xs font-medium text-blue-400 ring-1 ring-inset ring-blue-400/30 sm:order-none"},[e("i",{class:"fas fa-arrows-rotate pr-2"}),H(" Aggiorna ")],-1),Gt={class:"grid grid-cols-1 bg-gray-50 sm:grid-cols-2 lg:grid-cols-4 border-b"},Jt={class:"text-sm font-medium leading-6 text-gray-500"},Qt={class:"mt-2 flex items-baseline gap-x-2"},Wt={class:"text-3xl font-medium tracking-tight text-text"},Xt={key:0,class:"text-sm text-gray-500"},Zt={class:"mt-10 w-full whitespace-nowrap text-left"},el=e("colgroup",null,[e("col",{class:"w-full sm:w-4/12"}),e("col",{class:"lg:w-4/12"}),e("col",{class:"lg:w-2/12"}),e("col",{class:"lg:w-1/12"}),e("col",{class:"lg:w-1/12"})],-1),tl=e("thead",{class:"border-b text-sm leading-6 text-text"},[e("tr",null,[e("th",{scope:"col",class:"py-2 pl-4 pr-8 font-semibold sm:pl-6 lg:pl-8"},"Azienda"),e("th",{scope:"col",class:"hidden py-2 pl-0 pr-8 font-semibold sm:table-cell"},"Mese"),e("th",{scope:"col",class:"py-2 pl-0 pr-4 text-right font-semibold sm:pr-8 sm:text-left lg:pr-20"},"N"),e("th",{scope:"col",class:"py-2 pl-0 pr-4 text-right font-semibold sm:pr-8 sm:text-left lg:pr-20"},"P"),e("th",{scope:"col",class:"py-2 pl-0 pr-4 text-right font-semibold sm:pr-8 sm:text-left lg:pr-20"},"K")])],-1),ll={class:"divide-y divide-border"},al={class:"py-4 pl-4 pr-8 sm:pl-6 lg:pl-8"},ol={class:"flex items-center gap-x-4"},sl={class:"truncate text-sm font-medium leading-6 text-text"},nl={class:"text-gray-400 pl-2"},il={class:"hidden py-4 pl-0 pr-8 text-sm leading-6 md:table-cell lg:pr-20"},rl={class:"hidden py-4 pl-0 pr-8 text-sm leading-6 md:table-cell lg:pr-20"},ul={class:"flex items-center"},dl={key:0,class:"flex-none rounded-full bg-red-400/10 p-1 ml-2"},cl=e("div",{class:"h-2 w-2 rounded-full bg-red-400"},null,-1),pl=[cl],fl={class:"hidden py-4 pl-0 pr-8 text-sm leading-6 md:table-cell lg:pr-20"},ml={class:"flex items-center"},vl={class:"hidden py-4 pl-0 pr-8 text-sm leading-6 md:table-cell lg:pr-20"},bl={class:"flex items-center"},xl=e("i",{class:"fal fa-arrow-left"},null,-1),gl=L({__name:"npkTab",setup(l){const r=O([]),_=se,g=O(!1),a=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"];J(()=>{se.forEach(c=>{a.forEach((p,x)=>{const V={name:c.name,cuaa:c.cuaa,monthIndex:x,monthDescription:p,nitrogen:c.isInDanger?Math.floor(Math.random()*30)/10:Math.floor(Math.random()*100)/10,phosphorus:Math.floor(Math.random()*100)/10,potassium:Math.floor(Math.random()*100)/10};r.value.push(V)})})});function t(c){return _.find(p=>p.cuaa===c)?.isInDanger}const s=k(()=>r.value.reduce((c,p)=>c+p.nitrogen,0)/r.value.length),d=k(()=>r.value.reduce((c,p)=>c+p.phosphorus,0)/r.value.length),f=k(()=>r.value.reduce((c,p)=>c+p.potassium,0)/r.value.length),b=k(()=>[{name:"Aziende totali",value:_.length.toString(),unit:""},{name:"Media Azoto",value:s.value.toFixed(1),unit:""},{name:"Media Fosforo",value:d.value.toFixed(1),unit:""},{name:"Media Potassio",value:f.value.toFixed(1),unit:""}]);function h(){g.value=!0}return(c,p)=>(w(),S("div",jt,[e("div",{class:"flex flex-col items-start justify-between gap-x-8 gap-y-4 bg-gray-50 px-4 py-4 sm:flex-row sm:items-center sm:px-6 lg:px-8 -mt-px"},[Kt,e("div",{class:"flex space-x-2"},[e("button",{type:"button",onClick:h,class:"cursor-pointer order-first flex-none rounded-full bg-blue-400/10 hover:bg-blue-400/20 px-2 py-1 text-xs font-medium text-blue-400 ring-1 ring-inset ring-blue-400/30 sm:order-none"},[Yt,H(" Crea grafico ")]),Ut,qt])]),e("div",Gt,[(w(!0),S(Y,null,U(b.value,(x,V)=>(w(),S("div",{key:x.name,class:K([V%2===1?"sm:border-l":V===2?"lg:border-l":"","border-t py-6 px-4 sm:px-6 lg:px-8"])},[e("p",Jt,M(x.name),1),e("p",Qt,[e("span",Wt,M(x.value),1),x.unit?(w(),S("span",Xt,M(x.unit),1)):q("",!0)])],2))),128))]),e("table",Zt,[el,tl,e("tbody",ll,[(w(!0),S(Y,null,U(r.value,(x,V)=>(w(),S("tr",{key:V},[e("td",al,[e("div",ol,[e("div",sl,[e("span",null,M(x.name),1),e("span",nl,M(x.cuaa),1)])])]),e("td",il,M(x.monthDescription),1),e("td",rl,[e("span",ul,[H(M(x.nitrogen)+" ",1),t(x.cuaa)?(w(),S("div",dl,pl)):q("",!0)])]),e("td",fl,[e("span",ml,M(x.phosphorus),1)]),e("td",vl,[e("span",bl,M(x.potassium),1)])]))),128))])]),$(ve,{title:"Grafico NPK","is-open":g.value,modalClass:"w-full lg:w-10/12 xl:w-8/12 2xl:w-6/12",onClose:p[2]||(p[2]=x=>g.value=!1),onSubmit:p[3]||(p[3]=x=>g.value=!1),"is-scrollable":"","no-padding":"","hide-footer":""},{footer:T(()=>[$(Z,{onClick:p[1]||(p[1]=x=>g.value=!1),isOutlined:!0,"is-secondary":!0},{icon:T(()=>[xl]),default:T(()=>[H("Indietro ")]),_:1})]),default:T(()=>[$(Ht,{npkItems:r.value,yieldItems:P(_),onClose:p[0]||(p[0]=x=>g.value=!1)},null,8,["npkItems","yieldItems"])]),_:1},8,["is-open"])]))}}),hl={class:"w-full"},_l={class:"relative"},yl={class:"bg-gray-100 px-4 py-2.5 text-xs font-semibold text-gray-900"},wl={class:"mt-2 text-sm text-gray-800"},Cl={key:1,class:"border-t border-gray-100 px-6 py-14 text-center text-sm sm:px-14"},Il=e("p",{class:"mt-4 font-semibold text-gray-900"},"Nessuna tabella trovata",-1),Ol=e("p",{class:"mt-2 text-gray-500"},"Non siamo riusciti a trovare nulla con questo termine. Riprova",-1),Sl=L({__name:"tabSelectionModal",emits:["select"],setup(l,{emit:r}){const _=at,g=O(""),a=k(()=>g.value===""?_:_.filter(d=>d.name.toLowerCase().includes(g.value.toLowerCase()))),t=k(()=>a.value.reduce((d,f)=>({...d,[f.category]:[...d[f.category]||[],f]}),{}));function s(d){r("select",d)}return(d,f)=>(w(),S("div",hl,[$(P(Xe),{"onUpdate:modelValue":s},{default:T(()=>[e("div",_l,[$(P(lt),{class:"pointer-events-none absolute left-4 top-3.5 h-5 w-5 text-gray-400","aria-hidden":"true"}),$(P(Ze),{class:"h-12 w-full border-0 bg-transparent pl-11 pr-4 text-gray-900 placeholder:text-gray-400 focus:ring-0 sm:text-sm",placeholder:"Cerca...",onChange:f[0]||(f[0]=b=>g.value=b.target.value)})]),a.value.length>0?(w(),X(P(et),{key:0,static:"",class:"max-h-80 scroll-pb-2 scroll-pt-11 space-y-2 overflow-y-auto pb-2"},{default:T(()=>[(w(!0),S(Y,null,U(Object.entries(t.value),([b,h])=>(w(),S("li",{key:b},[e("h2",yl,M(b),1),e("ul",wl,[(w(!0),S(Y,null,U(h,c=>(w(),X(P(tt),{key:c.id,value:c,as:"template"},{default:T(({active:p})=>[e("li",{class:K(["cursor-pointer select-none px-4 py-2 transition-colors",p&&"bg-blue-600 text-text-opposite"])},M(c.name),3)]),_:2},1032,["value"]))),128))])]))),128))]),_:1})):q("",!0),g.value!==""&&a.value.length===0?(w(),S("div",Cl,[$(P(qe),{class:"mx-auto h-6 w-6 text-gray-400","aria-hidden":"true"}),Il,Ol])):q("",!0)]),_:1})]))}}),$l={class:"flex flex-col w-full h-full overflow-hidden"},kl={class:"flex overflow-x-auto pt-4 w-full"},Rl={class:"sm:block w-full"},Tl={class:"border-b px-8"},Al={class:"-mb-px flex justify-between","aria-label":"Tabs"},Pl={class:"flex space-x-8"},Vl=["onClick","aria-current"],Ml={class:"flex space-x-8"},Dl=e("i",{class:"fas fa-plus-circle pr-2"},null,-1),Fl=e("span",null,"Aggiungi tab",-1),El=[Dl,Fl],Nl={class:"flex flex-col w-full overflow-auto"},zl=e("i",{class:"fal fa-arrow-left"},null,-1),Bl=L({__name:"body",setup(l){const r=O(!1),_=O([{id:"yield",name:"Resa",href:"#",current:!0},{id:"water",name:"Bilancio idrico",href:"#",current:!1}]),g=k(()=>_.value.find(t=>t.current));function a(t){const s={id:t.id,name:t.name,current:!1};_.value.find(d=>d.id===t.id)||(r.value=!1,_.value.push(s),g.value.current=!1,s.current=!0)}return(t,s)=>(w(),S("div",$l,[e("header",null,[e("nav",kl,[e("div",Rl,[e("div",Tl,[e("nav",Al,[e("div",Pl,[(w(!0),S(Y,null,U(_.value,d=>(w(),S("button",{type:"button",key:d.name,onClick:f=>{g.value.current=!1,d.current=!0},class:K([d.current?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700","whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium"]),"aria-current":d.current?"page":void 0},M(d.name),11,Vl))),128))]),e("div",Ml,[e("button",{type:"button",onClick:s[0]||(s[0]=d=>r.value=!0),class:K(["border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700","whitespace-nowrap border-b-2 py-4 px-1 text-sm font-medium flex items-center"])},El)])])])])])]),e("div",Nl,[$(Ce,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"transform opacity-50","enter-to-class":"transform opacity-100"},{default:T(()=>[g.value.id==="yield"?(w(),X(Ot,{key:0})):g.value.id==="npk"?(w(),X(gl,{key:1})):q("",!0)]),_:1})]),$(ve,{"is-open":r.value,modalClass:"w-full lg:w-10/12 xl:w-8/12 2xl:w-6/12",onClose:s[2]||(s[2]=d=>r.value=!1),onSubmit:s[3]||(s[3]=d=>r.value=!1),"is-scrollable":"","no-padding":"","hide-footer":""},{footer:T(()=>[$(Z,{onClick:s[1]||(s[1]=d=>r.value=!1),isOutlined:!0,"is-secondary":!0},{icon:T(()=>[zl]),default:T(()=>[H("Indietro ")]),_:1})]),default:T(()=>[$(Sl,{onSelect:a})]),_:1},8,["is-open"])]))}}),Ll={class:"flex h-full w-full flex-col items-start px-2 sm:px-4 lg:px-8"},Hl={class:"flex w-full space-x-6 pb-8 pt-4 h-full"},na=L({__name:"index",setup(l){return(r,_)=>(w(),S("div",Ll,[e("div",Hl,[$(ge,{title:"Data manager","no-header":"",class:"w-full h-full"},{default:T(()=>[$(Bl)]),_:1})])]))}});export{na as default};
